# [1393. è‚¡ç¥¨çš„èµ„æœ¬æŸç›Šã€ä¸­ç­‰ã€‘](https://github.com/tnotesjs/TNotes.leetcode/tree/main/notes/1393.%20%E8%82%A1%E7%A5%A8%E7%9A%84%E8%B5%84%E6%9C%AC%E6%8D%9F%E7%9B%8A%E3%80%90%E4%B8%AD%E7%AD%89%E3%80%91)

<!-- region:toc -->

- [1. ğŸ“ é¢˜ç›®æè¿°](#1--é¢˜ç›®æè¿°)
- [2. ğŸ¯ s.1 - è§£æ³• 1](#2--s1---è§£æ³•-1)
- [3. ğŸ¯ s.2 - è§£æ³• 2](#3--s2---è§£æ³•-2)
- [4. ğŸ¯ s.3 - è§£æ³• 3](#4--s3---è§£æ³•-3)

<!-- endregion:toc -->

## 1. ğŸ“ é¢˜ç›®æè¿°

- [leetcode](https://leetcode.cn/problems/capital-gainloss/)

`Stocks` è¡¨ï¼š

```txt
+---------------+---------+
| Column Name   | Type    |
+---------------+---------+
| stock_name    | varchar |
| operation     | enum    |
| operation_day | int     |
| price         | int     |
+---------------+---------+
(stock_name, operation_day) æ˜¯è¿™å¼ è¡¨çš„ä¸»é”®(å…·æœ‰å”¯ä¸€å€¼çš„åˆ—çš„ç»„åˆ)
operation åˆ—ä½¿ç”¨çš„æ˜¯ä¸€ç§æšä¸¾ç±»å‹ï¼ŒåŒ…æ‹¬ï¼š('Sell','Buy')
æ­¤è¡¨çš„æ¯ä¸€è¡Œä»£è¡¨äº†åä¸º stock_name çš„æŸæ”¯è‚¡ç¥¨åœ¨ operation_day è¿™ä¸€å¤©çš„æ“ä½œä»·æ ¼ã€‚
æ­¤è¡¨å¯ä»¥ä¿è¯ï¼Œè‚¡ç¥¨çš„æ¯ä¸ªâ€œå–å‡ºâ€æ“ä½œåœ¨å‰æŸä¸€å¤©éƒ½æœ‰ç›¸åº”çš„â€œä¹°å…¥â€æ“ä½œã€‚
å¹¶ä¸”ï¼Œè‚¡ç¥¨çš„æ¯ä¸ªâ€œä¹°å…¥â€æ“ä½œåœ¨å³å°†åˆ°æ¥çš„æŸä¸€å¤©éƒ½æœ‰ç›¸åº”çš„â€œå–å‡ºâ€æ“ä½œã€‚
```

ç¼–å†™è§£å†³æ–¹æ¡ˆæŠ¥å‘Šæ¯åªè‚¡ç¥¨çš„ èµ„æœ¬æŸç›Šã€‚

è‚¡ç¥¨çš„ èµ„æœ¬åˆ©å¾—/æŸå¤± æ˜¯æŒ‡ä¸€æ¬¡æˆ–å¤šæ¬¡ä¹°å–è¯¥è‚¡ç¥¨åçš„æ€»æ”¶ç›Šæˆ–æŸå¤±ã€‚

ä»¥ ä»»æ„é¡ºåº è¿”å›ç»“æœè¡¨ã€‚

ç»“æœæ ¼å¼å¦‚ä¸‹æ‰€ç¤ºã€‚

---

- ç¤ºä¾‹ 1ï¼š

```txt
è¾“å…¥ï¼š
Stocks è¡¨:
+---------------+-----------+---------------+--------+
| stock_name    | operation | operation_day | price  |
+---------------+-----------+---------------+--------+
| Leetcode      | Buy       | 1             | 1000   |
| Corona Masks  | Buy       | 2             | 10     |
| Leetcode      | Sell      | 5             | 9000   |
| Handbags      | Buy       | 17            | 30000  |
| Corona Masks  | Sell      | 3             | 1010   |
| Corona Masks  | Buy       | 4             | 1000   |
| Corona Masks  | Sell      | 5             | 500    |
| Corona Masks  | Buy       | 6             | 1000   |
| Handbags      | Sell      | 29            | 7000   |
| Corona Masks  | Sell      | 10            | 10000  |
+---------------+-----------+---------------+--------+

è¾“å‡ºï¼š
+---------------+-------------------+
| stock_name    | capital_gain_loss |
+---------------+-------------------+
| Corona Masks  | 9500              |
| Leetcode      | 8000              |
| Handbags      | -23000            |
+---------------+-------------------+

è§£é‡Šï¼š
Leetcode è‚¡ç¥¨åœ¨ç¬¬ä¸€å¤©ä»¥1000ç¾å…ƒçš„ä»·æ ¼ä¹°å…¥ï¼Œåœ¨ç¬¬äº”å¤©ä»¥9000ç¾å…ƒçš„ä»·æ ¼å–å‡ºã€‚
èµ„æœ¬æ”¶ç›Š=9000-1000=8000ç¾å…ƒã€‚
Handbags è‚¡ç¥¨åœ¨ç¬¬17å¤©ä»¥30000ç¾å…ƒçš„ä»·æ ¼ä¹°å…¥ï¼Œåœ¨ç¬¬29å¤©ä»¥7000ç¾å…ƒçš„ä»·æ ¼å–å‡ºã€‚
èµ„æœ¬æŸå¤±=7000-30000=-23000ç¾å…ƒã€‚
Corona Masks è‚¡ç¥¨åœ¨ç¬¬1å¤©ä»¥10ç¾å…ƒçš„ä»·æ ¼ä¹°å…¥ï¼Œåœ¨ç¬¬3å¤©ä»¥1010ç¾å…ƒçš„ä»·æ ¼å–å‡ºã€‚
åœ¨ç¬¬4å¤©ä»¥1000ç¾å…ƒçš„ä»·æ ¼å†æ¬¡è´­ä¹°ï¼Œåœ¨ç¬¬5å¤©ä»¥500ç¾å…ƒçš„ä»·æ ¼å‡ºå”®ã€‚
æœ€åï¼Œå®ƒåœ¨ç¬¬6å¤©ä»¥1000ç¾å…ƒçš„ä»·æ ¼è¢«ä¹°èµ°ï¼Œåœ¨ç¬¬10å¤©ä»¥10000ç¾å…ƒçš„ä»·æ ¼è¢«å–æ‰ã€‚
èµ„æœ¬æŸç›Šæ˜¯æ¯æ¬¡ï¼ˆâ€™Buy'->'Sell'ï¼‰æ“ä½œèµ„æœ¬æ”¶ç›Šæˆ–æŸå¤±çš„å’Œ=ï¼ˆ1010-10ï¼‰+ï¼ˆ500-1000ï¼‰+ï¼ˆ10000-1000ï¼‰=1000-500+9000=9500ç¾å…ƒã€‚
```

## 2. ğŸ¯ s.1 - è§£æ³• 1

::: code-group

<<< ./solutions/1/1.js [js]

:::

- æ—¶é—´å¤æ‚åº¦ï¼š$O(1)$
- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$
