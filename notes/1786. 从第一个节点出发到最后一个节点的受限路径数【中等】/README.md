# [1786. ä»ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å‡ºå‘åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„å—é™è·¯å¾„æ•°ã€ä¸­ç­‰ã€‘](https://github.com/tnotesjs/TNotes.leetcode/tree/main/notes/1786.%20%E4%BB%8E%E7%AC%AC%E4%B8%80%E4%B8%AA%E8%8A%82%E7%82%B9%E5%87%BA%E5%8F%91%E5%88%B0%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E8%8A%82%E7%82%B9%E7%9A%84%E5%8F%97%E9%99%90%E8%B7%AF%E5%BE%84%E6%95%B0%E3%80%90%E4%B8%AD%E7%AD%89%E3%80%91)

<!-- region:toc -->

- [1. ğŸ“ é¢˜ç›®æè¿°](#1--é¢˜ç›®æè¿°)
- [2. ğŸ¯ s.1 - è§£æ³• 1](#2--s1---è§£æ³•-1)
- [3. ğŸ¯ s.2 - è§£æ³• 2](#3--s2---è§£æ³•-2)
- [4. ğŸ¯ s.3 - è§£æ³• 3](#4--s3---è§£æ³•-3)

<!-- endregion:toc -->

## 1. ğŸ“ é¢˜ç›®æè¿°

- [leetcode](https://leetcode.cn/problems/number-of-restricted-paths-from-first-to-last-node/)

ç°æœ‰ä¸€ä¸ªåŠ æƒæ— å‘è¿é€šå›¾ã€‚ç»™ä½ ä¸€ä¸ªæ­£æ•´æ•° `n` ï¼Œè¡¨ç¤ºå›¾ä¸­æœ‰ `n` ä¸ªèŠ‚ç‚¹ï¼Œå¹¶æŒ‰ä» `1` åˆ° `n` ç»™èŠ‚ç‚¹ç¼–å·ï¼›å¦ç»™ä½ ä¸€ä¸ªæ•°ç»„ `edges` ï¼Œå…¶ä¸­æ¯ä¸ª `edges[i] = [ui, vi, weighti]` è¡¨ç¤ºå­˜åœ¨ä¸€æ¡ä½äºèŠ‚ç‚¹ `ui` å’Œ `vi` ä¹‹é—´çš„è¾¹ï¼Œè¿™æ¡è¾¹çš„æƒé‡ä¸º `weighti` ã€‚

ä»èŠ‚ç‚¹ `start` å‡ºå‘åˆ°èŠ‚ç‚¹ `end` çš„è·¯å¾„æ˜¯ä¸€ä¸ªå½¢å¦‚ `[z0, z1, z2, ..., zk]` çš„èŠ‚ç‚¹åºåˆ—ï¼Œæ»¡è¶³ `z0 = start` ã€`zk = end` ä¸”åœ¨æ‰€æœ‰ç¬¦åˆ `0 <= i <= k-1` çš„èŠ‚ç‚¹ `zi` å’Œ `zi+1` ä¹‹é—´å­˜åœ¨ä¸€æ¡è¾¹ã€‚

è·¯å¾„çš„è·ç¦»å®šä¹‰ä¸ºè¿™æ¡è·¯å¾„ä¸Šæ‰€æœ‰è¾¹çš„æƒé‡æ€»å’Œã€‚ç”¨ `distanceToLastNode(x)` è¡¨ç¤ºèŠ‚ç‚¹ `n` å’Œ `x` ä¹‹é—´è·¯å¾„çš„æœ€çŸ­è·ç¦»ã€‚å—é™è·¯å¾„ ä¸ºæ»¡è¶³ `distanceToLastNode(zi) > distanceToLastNode(zi+1)` çš„ä¸€æ¡è·¯å¾„ï¼Œå…¶ä¸­ `0 <= i <= k-1` ã€‚

è¿”å›ä»èŠ‚ç‚¹ `1` å‡ºå‘åˆ°èŠ‚ç‚¹ `n` çš„ å—é™è·¯å¾„æ•° ã€‚ç”±äºæ•°å­—å¯èƒ½å¾ˆå¤§ï¼Œè¯·è¿”å›å¯¹ `10^9 + 7` å–ä½™ çš„ç»“æœã€‚

---

- ç¤ºä¾‹ 1ï¼š

![å›¾ 0](https://cdn.jsdelivr.net/gh/tnotesjs/imgs@main/2025-09-25-12-19-10.png)

```txt
è¾“å…¥ï¼šn = 5, edges = [[1,2,3],[1,3,3],[2,3,1],[1,4,2],[5,2,2],[3,5,1],[5,4,10]]
è¾“å‡ºï¼š3
è§£é‡Šï¼šæ¯ä¸ªåœ†åŒ…å«é»‘è‰²çš„èŠ‚ç‚¹ç¼–å·å’Œè“è‰²çš„ distanceToLastNode å€¼ã€‚ä¸‰æ¡å—é™è·¯å¾„åˆ†åˆ«æ˜¯ï¼š
1) 1 --> 2 --> 5
2) 1 --> 2 --> 3 --> 5
3) 1 --> 3 --> 5
```

- ç¤ºä¾‹ 2ï¼š

![å›¾ 1](https://cdn.jsdelivr.net/gh/tnotesjs/imgs@main/2025-09-25-12-19-18.png)

```txt
è¾“å…¥ï¼šn = 7, edges = [[1,3,1],[4,1,2],[7,3,4],[2,5,3],[5,6,1],[6,7,2],[7,5,3],[2,6,4]]
è¾“å‡ºï¼š1
è§£é‡Šï¼šæ¯ä¸ªåœ†åŒ…å«é»‘è‰²çš„èŠ‚ç‚¹ç¼–å·å’Œè“è‰²çš„ distanceToLastNode å€¼ã€‚å”¯ä¸€ä¸€æ¡å—é™è·¯å¾„æ˜¯ï¼š1 --> 3 --> 7 ã€‚
```

---

æç¤ºï¼š

- `1 <= n <= 2 * 10^4`
- `n - 1 <= edges.length <= 4 * 10^4`
- `edges[i].length == 3`
- `1 <= ui, vi <= n`
- `ui != vi`
- `1 <= weighti <= 10^5`
- ä»»æ„ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´è‡³å¤šå­˜åœ¨ä¸€æ¡è¾¹
- ä»»æ„ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´è‡³å°‘å­˜åœ¨ä¸€æ¡è·¯å¾„

## 2. ğŸ¯ s.1 - è§£æ³• 1

::: code-group

<<< ./solutions/1/1.js [js]

:::

- æ—¶é—´å¤æ‚åº¦ï¼š$O(1)$
- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$

## 3. ğŸ¯ s.2 - è§£æ³• 2

::: code-group

<<< ./solutions/2/1.js [js]

:::

- æ—¶é—´å¤æ‚åº¦ï¼š$O(1)$
- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$

## 4. ğŸ¯ s.3 - è§£æ³• 3

::: code-group

<<< ./solutions/3/1.js [js]

:::

- æ—¶é—´å¤æ‚åº¦ï¼š$O(1)$
- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$
