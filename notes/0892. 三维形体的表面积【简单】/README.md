# [0892. 三维形体的表面积【简单】](https://github.com/tnotesjs/TNotes.leetcode/tree/main/notes/0892.%20%E4%B8%89%E7%BB%B4%E5%BD%A2%E4%BD%93%E7%9A%84%E8%A1%A8%E9%9D%A2%E7%A7%AF%E3%80%90%E7%AE%80%E5%8D%95%E3%80%91)

<!-- region:toc -->

- [1. 📝 题目描述](#1--题目描述)
- [2. 🎯 s.1 - 暴力解法](#2--s1---暴力解法)

<!-- endregion:toc -->

## 1. 📝 题目描述

- [leetcode](https://leetcode.cn/problems/surface-area-of-3d-shapes/)

给你一个 `n * n` 的网格 `grid` ，上面放置着一些 `1 x 1 x 1` 的正方体。每个值 `v = grid[i][j]` 表示 `v` 个正方体叠放在对应单元格 `(i, j)` 上。

放置好正方体后，任何直接相邻的正方体都会互相粘在一起，形成一些不规则的三维形体。

请你返回最终这些形体的总表面积。

---

**注意：** 每个形体的底面也需要计入表面积中。

---

- **示例 1：**

![图 0](https://cdn.jsdelivr.net/gh/tnotesjs/imgs@main/2025-09-16-12-09-18.png)

```txt
输入：grid = [[1,2],[3,4]]
输出：34
```

- **示例 2：**

![图 1](https://cdn.jsdelivr.net/gh/tnotesjs/imgs@main/2025-09-16-12-09-26.png)

```txt
输入：grid = [[1,1,1],[1,0,1],[1,1,1]]
输出：32
```

- **示例 3：**

![图 2](https://cdn.jsdelivr.net/gh/tnotesjs/imgs@main/2025-09-16-12-09-34.png)

```txt
输入：grid = [[2,2,2],[2,1,2],[2,2,2]]
输出：46
```

---

**提示：**

- `n == grid.length`
- `n == grid[i].length`
- `1 <= n <= 50`
- `0 <= grid[i][j] <= 50`

## 2. 🎯 s.1 - 暴力解法

::: code-group

<<< ./solutions/1/1.js

<<< ./solutions/1/2.js

:::

- 时间复杂度：$O(n^2)$，遍历每个格子
- 空间复杂度：$O(1)$
- 解题思路-1：查 4 个面
  - 总表面积 = 所有立方体的顶面 + 底面 + 四个侧面暴露的部分
  - 顶面和底面：只要该位置有立方体，就各贡献 1 面 → 所以每个非零格子贡献 2。
  - 侧面（前后左右）：每个方向的暴露面积 = 当前格子高度 - 与邻居重叠部分（即与邻居的较小高度）
- 解题思路-2：查 2 个面
  - 计算相邻面数量
  - 每个立方体贡献 6 个面，但堆叠在一起时，每相邻两个立方体会遮挡 **2 个面**（上面和下面）。
  - 同时，在相邻格子之间（前后左右），也会因为高度重叠而遮挡侧面。
  - 综上，算法如下：
  - 先计算所有立方体的总表面积（不考虑遮挡）：`6 * 每个格子的高度`
  - 然后减去被遮挡的面：
    - 垂直堆叠遮挡：每个格子内部，`height - 1` 个接触面，每个遮挡 2 个面（上下），所以减去 `2 * (height - 1)`
    - 相邻格子之间的遮挡：对每个方向（上下左右），取两个格子的最小高度，乘以 2（因为两个面被遮挡）
- 对比：
  - 思路 1 是计算每根立柱的四周有效面积 - 周围的 4 个面都要查
  - 思路 2 是根据规律，利用 6 个面减去每个被遮挡面的数量的两倍得到结果 - 遮挡面只需要查每个立方体的两个面（比如俯视图的左上角）
