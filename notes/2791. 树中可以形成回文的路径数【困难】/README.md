# [2791. æ ‘ä¸­å¯ä»¥å½¢æˆå›æ–‡çš„è·¯å¾„æ•°ã€å›°éš¾ã€‘](https://github.com/tnotesjs/TNotes.leetcode/tree/main/notes/2791.%20%E6%A0%91%E4%B8%AD%E5%8F%AF%E4%BB%A5%E5%BD%A2%E6%88%90%E5%9B%9E%E6%96%87%E7%9A%84%E8%B7%AF%E5%BE%84%E6%95%B0%E3%80%90%E5%9B%B0%E9%9A%BE%E3%80%91)

<!-- region:toc -->

- [1. ğŸ“ é¢˜ç›®æè¿°](#1--é¢˜ç›®æè¿°)
- [2. ğŸ¯ s.1 - è§£æ³• 1](#2--s1---è§£æ³•-1)
- [3. ğŸ¯ s.2 - è§£æ³• 2](#3--s2---è§£æ³•-2)
- [4. ğŸ¯ s.3 - è§£æ³• 3](#4--s3---è§£æ³•-3)

<!-- endregion:toc -->

## 1. ğŸ“ é¢˜ç›®æè¿°

- [leetcode](https://leetcode.cn/problems/count-paths-that-can-form-a-palindrome-in-a-tree/)

ç»™ä½ ä¸€æ£µ **æ ‘**ï¼ˆå³ï¼Œä¸€ä¸ªè¿é€šã€æ— å‘ä¸”æ— ç¯çš„å›¾ï¼‰ï¼Œ**æ ¹** èŠ‚ç‚¹ä¸º `0` ï¼Œç”±ç¼–å·ä» `0` åˆ° `n - 1` çš„ `n` ä¸ªèŠ‚ç‚¹ç»„æˆã€‚è¿™æ£µæ ‘ç”¨ä¸€ä¸ªé•¿åº¦ä¸º `n` ã€ä¸‹æ ‡ä» **0** å¼€å§‹çš„æ•°ç»„ `parent` è¡¨ç¤ºï¼Œå…¶ä¸­ `parent[i]` ä¸ºèŠ‚ç‚¹ `i` çš„çˆ¶èŠ‚ç‚¹ï¼Œç”±äºèŠ‚ç‚¹ `0` ä¸ºæ ¹èŠ‚ç‚¹ï¼Œæ‰€ä»¥ `parent[0] == -1` ã€‚

å¦ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„å­—ç¬¦ä¸² `s` ï¼Œå…¶ä¸­ `s[i]` æ˜¯åˆ†é…ç»™ `i` å’Œ `parent[i]` ä¹‹é—´çš„è¾¹çš„å­—ç¬¦ã€‚`s[0]` å¯ä»¥å¿½ç•¥ã€‚

æ‰¾å‡ºæ»¡è¶³ `u < v` ï¼Œä¸”ä» `u` åˆ° `v` çš„è·¯å¾„ä¸Šåˆ†é…çš„å­—ç¬¦å¯ä»¥ **é‡æ–°æ’åˆ—** å½¢æˆ **å›æ–‡** çš„æ‰€æœ‰èŠ‚ç‚¹å¯¹ `(u, v)` ï¼Œå¹¶è¿”å›èŠ‚ç‚¹å¯¹çš„æ•°ç›®ã€‚

å¦‚æœä¸€ä¸ªå­—ç¬¦ä¸²æ­£ç€è¯»å’Œåç€è¯»éƒ½ç›¸åŒï¼Œé‚£ä¹ˆè¿™ä¸ªå­—ç¬¦ä¸²å°±æ˜¯ä¸€ä¸ª **å›æ–‡** ã€‚

---

- **ç¤ºä¾‹ 1ï¼š**

![å›¾ 0](https://cdn.jsdelivr.net/gh/tnotesjs/imgs@main/2025-09-28-12-06-26.png)

```txt
è¾“å…¥ï¼šparent = [-1,0,0,1,1,2], s = "acaabc"
è¾“å‡ºï¼š8
è§£é‡Šï¼šç¬¦åˆé¢˜ç›®è¦æ±‚çš„èŠ‚ç‚¹å¯¹åˆ†åˆ«æ˜¯ï¼š
- (0,1)ã€(0,2)ã€(1,3)ã€(1,4) å’Œ (2,5) ï¼Œè·¯å¾„ä¸Šåªæœ‰ä¸€ä¸ªå­—ç¬¦ï¼Œæ»¡è¶³å›æ–‡å®šä¹‰ã€‚
- (2,3)ï¼Œè·¯å¾„ä¸Šå­—ç¬¦å½¢æˆçš„å­—ç¬¦ä¸²æ˜¯ "aca" ï¼Œæ»¡è¶³å›æ–‡å®šä¹‰ã€‚
- (1,5)ï¼Œè·¯å¾„ä¸Šå­—ç¬¦å½¢æˆçš„å­—ç¬¦ä¸²æ˜¯ "cac" ï¼Œæ»¡è¶³å›æ–‡å®šä¹‰ã€‚
- (3,5)ï¼Œè·¯å¾„ä¸Šå­—ç¬¦å½¢æˆçš„å­—ç¬¦ä¸²æ˜¯ "acac" ï¼Œå¯ä»¥é‡æ’å½¢æˆå›æ–‡ "acca" ã€‚
```

- **ç¤ºä¾‹ 2ï¼š**

```txt
è¾“å…¥ï¼šparent = [-1,0,0,0,0], s = "aaaaa"
è¾“å‡ºï¼š10
è§£é‡Šï¼šä»»ä½•æ»¡è¶³ u < v çš„èŠ‚ç‚¹å¯¹ (u,v) éƒ½ç¬¦åˆé¢˜ç›®è¦æ±‚ã€‚
```

---

**æç¤ºï¼š**

- `n == parent.length == s.length`
- `1 <= n <= 10^5`
- å¯¹äºæ‰€æœ‰ `i >= 1` ï¼Œ`0 <= parent[i] <= n - 1` å‡æˆç«‹
- `parent[0] == -1`
- `parent` è¡¨ç¤ºä¸€æ£µæœ‰æ•ˆçš„æ ‘
- `s` ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ

## 2. ğŸ¯ s.1 - è§£æ³• 1

::: code-group

<<< ./solutions/1/1.js [js]

:::

- æ—¶é—´å¤æ‚åº¦ï¼š$O(1)$
- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$

## 3. ğŸ¯ s.2 - è§£æ³• 2

::: code-group

<<< ./solutions/2/1.js [js]

:::

- æ—¶é—´å¤æ‚åº¦ï¼š$O(1)$
- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$

## 4. ğŸ¯ s.3 - è§£æ³• 3

::: code-group

<<< ./solutions/3/1.js [js]

:::

- æ—¶é—´å¤æ‚åº¦ï¼š$O(1)$
- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$
