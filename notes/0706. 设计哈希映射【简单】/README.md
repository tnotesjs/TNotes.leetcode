# [0706. è®¾è®¡å“ˆå¸Œæ˜ å°„ã€ç®€å•ã€‘](https://github.com/tnotesjs/TNotes.leetcode/tree/main/notes/0706.%20%E8%AE%BE%E8%AE%A1%E5%93%88%E5%B8%8C%E6%98%A0%E5%B0%84%E3%80%90%E7%AE%80%E5%8D%95%E3%80%91)

<!-- region:toc -->

- [1. ğŸ“ é¢˜ç›®æè¿°](#1--é¢˜ç›®æè¿°)
- [2. ğŸ«§ è¯„ä»·](#2--è¯„ä»·)
- [3. ğŸ¯ s.1 - é“¾åœ°å€æ³•å®ç°å“ˆå¸Œè¡¨](#3--s1---é“¾åœ°å€æ³•å®ç°å“ˆå¸Œè¡¨)
- [4. ğŸ¤– `s.1` ä¸ºä»€ä¹ˆå°† size è®¾ç½®ä¸º 10000ï¼Ÿ](#4--s1-ä¸ºä»€ä¹ˆå°†-size-è®¾ç½®ä¸º-10000)
  - [4.1. ğŸ“Œ é¢˜ç›®å…³é”®çº¦æŸï¼ˆæ¥è‡ª LeetCode 706ï¼‰](#41--é¢˜ç›®å…³é”®çº¦æŸæ¥è‡ª-leetcode-706)
  - [4.2. ğŸ”¢ è´Ÿè½½å› å­ï¼ˆLoad Factorï¼‰æ˜¯å…³é”®](#42--è´Ÿè½½å› å­load-factoræ˜¯å…³é”®)
  - [4.3. â“ ä¸ºä»€ä¹ˆä¸é€‰è´¨æ•°ï¼ˆå¦‚ 9973ï¼‰ï¼Ÿ](#43--ä¸ºä»€ä¹ˆä¸é€‰è´¨æ•°å¦‚-9973)
  - [4.4. âœ… æ€»ç»“ï¼šä¸ºä»€ä¹ˆæ˜¯ 10000ï¼Ÿ](#44--æ€»ç»“ä¸ºä»€ä¹ˆæ˜¯-10000)
  - [4.5. ğŸ”§ é™„ï¼šå¦‚ä½•é€‰è´¨æ•°ï¼Ÿ](#45--é™„å¦‚ä½•é€‰è´¨æ•°)

<!-- endregion:toc -->

## 1. ğŸ“ é¢˜ç›®æè¿°

- [leetcode](https://leetcode.cn/problems/design-hashmap/)

ä¸ä½¿ç”¨ä»»ä½•å†…å»ºçš„å“ˆå¸Œè¡¨åº“è®¾è®¡ä¸€ä¸ªå“ˆå¸Œæ˜ å°„ï¼ˆHashMapï¼‰ã€‚

å®ç° `MyHashMap` ç±»ï¼š

- `MyHashMap()` ç”¨ç©ºæ˜ å°„åˆå§‹åŒ–å¯¹è±¡
- `void put(int key, int value)` å‘ HashMap æ’å…¥ä¸€ä¸ªé”®å€¼å¯¹ `(key, value)`ã€‚å¦‚æœ `key` å·²ç»å­˜åœ¨äºæ˜ å°„ä¸­ï¼Œåˆ™æ›´æ–°å…¶å¯¹åº”çš„å€¼ `value`ã€‚
- `int get(int key)` è¿”å›ç‰¹å®šçš„ `key` æ‰€æ˜ å°„çš„ `value` ï¼›å¦‚æœæ˜ å°„ä¸­ä¸åŒ…å« `key` çš„æ˜ å°„ï¼Œè¿”å› `-1`ã€‚
- `void remove(key)` å¦‚æœæ˜ å°„ä¸­å­˜åœ¨ `key` çš„æ˜ å°„ï¼Œåˆ™ç§»é™¤ `key` å’Œå®ƒæ‰€å¯¹åº”çš„ `value`ã€‚

---

ç¤ºä¾‹ï¼š

```txt
è¾“å…¥ï¼š
["MyHashMap", "put", "put", "get", "get", "put", "get", "remove", "get"]
[[], [1, 1], [2, 2], [1], [3], [2, 1], [2], [2], [2]]
è¾“å‡ºï¼š
[null, null, null, 1, -1, null, 1, null, -1]

è§£é‡Šï¼š
MyHashMap myHashMap = new MyHashMap();
myHashMap.put(1, 1); // myHashMap ç°åœ¨ä¸º [[1,1]]
myHashMap.put(2, 2); // myHashMap ç°åœ¨ä¸º [[1,1], [2,2]]
myHashMap.get(1);    // è¿”å› 1ï¼ŒmyHashMap ç°åœ¨ä¸º [[1,1], [2,2]]
myHashMap.get(3);    // è¿”å› -1ï¼ˆæœªæ‰¾åˆ°ï¼‰ï¼ŒmyHashMap ç°åœ¨ä¸º [[1,1], [2,2]]
myHashMap.put(2, 1); // myHashMap ç°åœ¨ä¸º [[1,1], [2,1]]ï¼ˆæ›´æ–°å·²æœ‰çš„å€¼ï¼‰
myHashMap.get(2);    // è¿”å› 1ï¼ŒmyHashMap ç°åœ¨ä¸º [[1,1], [2,1]]
myHashMap.remove(2); // åˆ é™¤é”®ä¸º 2 çš„æ•°æ®ï¼ŒmyHashMap ç°åœ¨ä¸º [[1,1]]
myHashMap.get(2);    // è¿”å› -1ï¼ˆæœªæ‰¾åˆ°ï¼‰ï¼ŒmyHashMap ç°åœ¨ä¸º [[1,1]]
```

---

æç¤ºï¼š

- `0 <= key, value <= 10^6`
- æœ€å¤šè°ƒç”¨ `10^4` æ¬¡ `put`ã€`get` å’Œ `remove` æ–¹æ³•

## 2. ğŸ«§ è¯„ä»·

- é¢˜ç›®è¦æ±‚ä¸­ç¦æ­¢ä½¿ç”¨å†…ç½®çš„å“ˆå¸Œç»“æ„ï¼Œæ¯”å¦‚åœ¨ JS ä¸­ï¼Œè¿™å°±æ„å‘³ç€ä½ æ— æ³•ä½¿ç”¨å†…ç½®çš„å¯¹è±¡ã€Map è¿™äº›ç»“æ„æ¥å®ç°ã€‚
- è®©æˆ‘ä»¬äº†è§£æ—¥å¸¸å¼€å‘ä¸­ä½¿ç”¨çš„ `key-val` é”®å€¼å¯¹è¿™æ ·çš„æ•°æ®ç»“æ„çš„å†…éƒ¨å®ç°åŸç†ï¼Œä¹Ÿæ­£æ˜¯æœ¬é¢˜çš„è€ƒæŸ¥ç›®çš„ä¹‹ä¸€ã€‚
- `s.1` é“¾åœ°å€æ³•ä¸­çš„å…³é”®ï¼š
  - ç†è§£ä¸ºä»€ä¹ˆå°† size è®¾ç½®ä¸º 10000 -> å¯ä»¥å‚è€ƒç¬”è®°ä¸­è®°å½•çš„ AI å›å¤
  - ç†è§£ä¸ºä»€ä¹ˆéœ€è¦ next æŒ‡é’ˆ -> è§£å†³å“ˆè¥¿å†²çª

## 3. ğŸ¯ s.1 - é“¾åœ°å€æ³•å®ç°å“ˆå¸Œè¡¨

::: code-group

<<< ./solutions/1/1.js [js]

:::

- æ—¶é—´å¤æ‚åº¦ï¼š$O(n/k)$ï¼Œå…¶ä¸­ n æ˜¯å“ˆå¸Œè¡¨ä¸­å…ƒç´ çš„ä¸ªæ•°ï¼Œk æ˜¯æ¡¶çš„æ•°é‡ï¼Œç†æƒ³æƒ…å†µä¸‹ä¸º $O(1)$
- ç©ºé—´å¤æ‚åº¦ï¼š$O(k + m)$ï¼Œå…¶ä¸­ k æ˜¯æ¡¶çš„æ•°é‡ï¼Œm æ˜¯å®é™…å­˜å‚¨çš„é”®å€¼å¯¹æ•°é‡

---

- ğŸ¤” ä¸ºä»€ä¹ˆéœ€è¦ next æŒ‡é’ˆï¼Ÿ
- ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªçš„é—®é¢˜ã€‚
- å½“å¤šä¸ªä¸åŒçš„é”®é€šè¿‡å“ˆå¸Œå‡½æ•°ï¼ˆè¿™é‡Œæ˜¯å–æ¨¡è¿ç®— key % this.sizeï¼‰è®¡ç®—åå¾—åˆ°ç›¸åŒçš„ç´¢å¼•æ—¶ï¼Œå°±ä¼šå‘ç”Ÿå“ˆå¸Œå†²çªã€‚ä¾‹å¦‚ï¼š

```js
// å‡è®¾ size = 10000
let key1 = 10001 // 10001 % 10000 = 1
let key2 = 20001 // 20001 % 10000 = 1
// key1 å’Œ key2 éƒ½æ˜ å°„åˆ°ç´¢å¼• 1
```

- ä¸ºäº†è§£å†³å†²çªï¼Œä½¿ç”¨é“¾è¡¨å°†æ˜ å°„åˆ°åŒä¸€ç´¢å¼•ä½ç½®çš„é”®å€¼å¯¹ä¸²è”èµ·æ¥ï¼š

```txt
buckets[1]:
[10001, "value1"] -> [20001, "value2"] -> [30001, "value3"] -> null
       â†‘                  â†‘                  â†‘
     èŠ‚ç‚¹1              èŠ‚ç‚¹2              èŠ‚ç‚¹3
```

- next çš„ä½œç”¨
  - è¿æ¥èŠ‚ç‚¹ï¼šnext æŒ‡é’ˆå°†åŒä¸€å“ˆå¸Œæ¡¶ä¸­çš„å¤šä¸ªèŠ‚ç‚¹è¿æ¥æˆé“¾è¡¨
  - éå†é“¾è¡¨ï¼šé€šè¿‡ next å¯ä»¥éå†æ•´ä¸ªé“¾è¡¨æŸ¥æ‰¾ã€æ›´æ–°æˆ–åˆ é™¤ç‰¹å®šé”®å€¼å¯¹
  - åŠ¨æ€æ‰©å±•ï¼šå…è®¸åœ¨é“¾è¡¨æœ«å°¾æ·»åŠ æ–°èŠ‚ç‚¹ï¼ŒåŠ¨æ€å¤„ç†å†²çª

## 4. ğŸ¤– `s.1` ä¸ºä»€ä¹ˆå°† size è®¾ç½®ä¸º 10000ï¼Ÿ

`Qwen3-Max`

---

å°† `size` è®¾ä¸º 10000 æ˜¯ä¸€ä¸ªåŸºäºé¢˜ç›®çº¦æŸçš„åˆç†å·¥ç¨‹é€‰æ‹©ï¼ŒèƒŒåæœ‰æ˜ç¡®çš„é€»è¾‘ä¾æ®ã€‚ä¸‹é¢æˆ‘ä»¬è¯¦ç»†è§£é‡Šä¸ºä»€ä¹ˆæ˜¯ 10000ï¼Œè€Œä¸æ˜¯ 100ã€1000 æˆ– 100000ã€‚

---

### 4.1. ğŸ“Œ é¢˜ç›®å…³é”®çº¦æŸï¼ˆæ¥è‡ª LeetCode 706ï¼‰

> - æœ€å¤šè°ƒç”¨ `10â´` æ¬¡ `put`ã€`get` å’Œ `remove` æ“ä½œã€‚
> - `key` çš„èŒƒå›´æ˜¯ `[0, 10â¶]`ã€‚
> - æ¯ä¸ª `key` æœ€å¤šè¢« `put` ä¸€æ¬¡ï¼ˆæˆ–å¤šæ¬¡æ›´æ–°ï¼‰ï¼Œæ‰€ä»¥æœ€å¤šæœ‰ 10â´ ä¸ªä¸åŒçš„é”®å€¼å¯¹ã€‚

è¿™æ„å‘³ç€ï¼š

- å“ˆå¸Œè¡¨ä¸­æœ€å¤šå­˜å‚¨ 10,000 ä¸ªå…ƒç´ ã€‚

---

### 4.2. ğŸ”¢ è´Ÿè½½å› å­ï¼ˆLoad Factorï¼‰æ˜¯å…³é”®

è´Ÿè½½å› å­ = æ€»å…ƒç´ æ•° / æ¡¶çš„æ•°é‡ï¼ˆsizeï¼‰

- å¦‚æœ `size = 100` â†’ è´Ÿè½½å› å­ â‰ˆ 10000 / 100 = 100 â†’ å¹³å‡æ¯ä¸ªæ¡¶æœ‰ 100 ä¸ªå…ƒç´  â†’ é“¾è¡¨å¾ˆé•¿ï¼Œæ€§èƒ½å·®ï¼ˆO(100) â‰ˆ O(n)ï¼‰
- å¦‚æœ `size = 1000` â†’ è´Ÿè½½å› å­ â‰ˆ 10 â†’ å¹³å‡é“¾è¡¨é•¿åº¦ 10ï¼Œå°šå¯ï¼Œä½†ä»æœ‰ä¼˜åŒ–ç©ºé—´
- å¦‚æœ `size = 10000` â†’ è´Ÿè½½å› å­ â‰ˆ 1 â†’ å¹³å‡æ¯ä¸ªæ¡¶åªæœ‰ 1 ä¸ªå…ƒç´  â†’ æ¥è¿‘ç†æƒ³å“ˆå¸Œè¡¨æ€§èƒ½ï¼ˆO(1)ï¼‰
- å¦‚æœ `size = 100000` â†’ è´Ÿè½½å› å­ â‰ˆ 0.1 â†’ å†…å­˜æµªè´¹ä¸¥é‡ï¼ˆ90% çš„æ¡¶æ˜¯ç©ºçš„ï¼‰

âœ… æ‰€ä»¥ 10000 æ˜¯ä¸€ä¸ªâ€œå¹³è¡¡ç‚¹â€ï¼š

- ä¿è¯å¹³å‡é“¾è¡¨é•¿åº¦ â‰ˆ 1
- å†…å­˜å¼€é”€åˆç†ï¼ˆ10000 ä¸ªæŒ‡é’ˆ â‰ˆ 80KBï¼Œåœ¨ç°ä»£è®¡ç®—æœºä¸­å¾®ä¸è¶³é“ï¼‰
- é¿å…é¢‘ç¹å†²çª

---

### 4.3. â“ ä¸ºä»€ä¹ˆä¸é€‰è´¨æ•°ï¼ˆå¦‚ 9973ï¼‰ï¼Ÿ

ç†è®ºä¸Šï¼Œä½¿ç”¨è´¨æ•°ä½œä¸ºå“ˆå¸Œè¡¨å¤§å°å¯ä»¥å‡å°‘å“ˆå¸Œå†²çªï¼Œå°¤å…¶æ˜¯å½“ `key` æœ‰è§„å¾‹æ—¶ï¼ˆæ¯”å¦‚éƒ½æ˜¯å¶æ•°ã€éƒ½æ˜¯ 10 çš„å€æ•°ç­‰ï¼‰ã€‚

ä¾‹å¦‚ï¼š

- å¦‚æœ `size = 10000`ï¼ˆåˆæ•°ï¼‰ï¼Œè€Œæ‰€æœ‰ `key` éƒ½æ˜¯ 100 çš„å€æ•° â†’ `key % 10000` åªä¼šè½åœ¨ `0, 100, 200, ..., 9900` è¿™ 100 ä¸ªæ¡¶é‡Œ â†’ ä¸¥é‡å†²çªï¼
- å¦‚æœ `size = 9973`ï¼ˆè´¨æ•°ï¼‰ï¼Œå³ä½¿ `key` æœ‰è§„å¾‹ï¼Œæ¨¡è¿ç®—ç»“æœä¹Ÿä¼šæ›´å‡åŒ€ã€‚

âœ… æ‰€ä»¥æ›´ä¸¥è°¨çš„åšæ³•æ˜¯é€‰ä¸€ä¸ªæ¥è¿‘ 10000 çš„è´¨æ•°ï¼Œæ¯”å¦‚ï¼š

```js
this.size = 9973 // æœ€æ¥è¿‘ 10000 çš„è´¨æ•°ä¹‹ä¸€
```

ä½†åœ¨ LeetCode çš„æµ‹è¯•ç”¨ä¾‹ä¸­ï¼š

- æµ‹è¯•æ•°æ®é€šå¸¸ä¸ä¼šåˆ»æ„æ„é€ æœ€åæƒ…å†µ
- `10000` å·²ç»è¶³å¤Ÿå¿«ï¼Œèƒ½é€šè¿‡æ‰€æœ‰æµ‹è¯•
- ä»£ç æ›´ç›´è§‚ï¼ˆ10â´ æ“ä½œ â†’ 10â´ æ¡¶ï¼‰

æ‰€ä»¥å¾ˆå¤šé¢˜è§£ç›´æ¥ç”¨ `10000`ï¼Œç‰ºç‰²ä¸€ç‚¹ç†è®ºæœ€ä¼˜æ€§ï¼Œæ¢å–ç®€æ´æ€§ã€‚

---

### 4.4. âœ… æ€»ç»“ï¼šä¸ºä»€ä¹ˆæ˜¯ 10000ï¼Ÿ

| åŸå›          | è¯´æ˜                                                       |
| ------------ | ---------------------------------------------------------- |
| åŒ¹é…æ“ä½œä¸Šé™ | æœ€å¤š 10â´ æ¬¡æ“ä½œ â†’ æœ€å¤š 10â´ ä¸ªå…ƒç´  â†’ size=10â´ ä½¿è´Ÿè½½å› å­ â‰ˆ1 |
| æ€§èƒ½æœ€ä¼˜     | å¹³å‡é“¾è¡¨é•¿åº¦ â‰ˆ1ï¼Œget/put/remove æ¥è¿‘ O(1)                  |
| å†…å­˜åˆç†     | 10000 ä¸ªæŒ‡é’ˆ â‰ˆ 80KBï¼Œå®Œå…¨å¯æ¥å—                            |
| ç®€å•ç›´è§‚     | æ•°å­—ä¸é¢˜ç›®çº¦æŸä¸€è‡´ï¼Œæ˜“äºç†è§£å’Œè®°å¿†                         |
| å®é™…å¤Ÿç”¨     | LeetCode æµ‹è¯•ç”¨ä¾‹ä¸ä¼šå¡è¿™ç§å®ç°                            |

> ğŸ’¡ æœ€ä½³å®è·µå»ºè®®ï¼šåœ¨é¢è¯•æˆ–ç«èµ›ä¸­ï¼Œç”¨ `10000` å®Œå…¨æ²¡é—®é¢˜ï¼›åœ¨å·¥ä¸šçº§ä»£ç ä¸­ï¼Œå»ºè®®ç”¨è´¨æ•°ï¼ˆå¦‚ 9973ï¼‰å¹¶æ”¯æŒåŠ¨æ€æ‰©å®¹ã€‚

---

### 4.5. ğŸ”§ é™„ï¼šå¦‚ä½•é€‰è´¨æ•°ï¼Ÿ

ä½ å¯ä»¥è®°ä½å‡ ä¸ªå¸¸ç”¨è´¨æ•°ï¼š

- æ¥è¿‘ 100 â†’ `97`
- æ¥è¿‘ 1000 â†’ `997`
- æ¥è¿‘ 10000 â†’ `9973`
- æ¥è¿‘ 100000 â†’ `99991`

æ‰€ä»¥æ›´â€œä¸“ä¸šâ€çš„å†™æ³•æ˜¯ï¼š

```js
var MyHashMap = function () {
  this.size = 9973 // è´¨æ•°ï¼Œå‡å°‘å†²çª
  this.buckets = new Array(this.size).fill(null)
}
```

ä½†åŸé¢˜è§£ç”¨ `10000` ä¹Ÿå®Œå…¨æ­£ç¡®ä¸”é«˜æ•ˆï¼Œæ— éœ€æ‹…å¿ƒã€‚
