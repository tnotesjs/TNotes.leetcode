# [3331. ä¿®æ”¹åå­æ ‘çš„å¤§å°ã€ä¸­ç­‰ã€‘](https://github.com/tnotesjs/TNotes.leetcode/tree/main/notes/3331.%20%E4%BF%AE%E6%94%B9%E5%90%8E%E5%AD%90%E6%A0%91%E7%9A%84%E5%A4%A7%E5%B0%8F%E3%80%90%E4%B8%AD%E7%AD%89%E3%80%91)

<!-- region:toc -->

- [1. ğŸ“ é¢˜ç›®æè¿°](#1--é¢˜ç›®æè¿°)
- [2. ğŸ¯ s.1 - è§£æ³• 1](#2--s1---è§£æ³•-1)

<!-- endregion:toc -->

## 1. ğŸ“ é¢˜ç›®æè¿°

- [leetcode](https://leetcode.cn/problems/find-subtree-sizes-after-changes/)

ç»™ä½ ä¸€æ£µ `n` ä¸ªèŠ‚ç‚¹ä¸”æ ¹èŠ‚ç‚¹ä¸ºç¼–å· 0 çš„æ ‘ï¼ŒèŠ‚ç‚¹ç¼–å·ä¸º `0` åˆ° `n - 1`ã€‚è¿™æ£µæ ‘ç”¨ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„æ•°ç»„ `parent` è¡¨ç¤ºï¼Œå…¶ä¸­ `parent[i]` æ˜¯ç¬¬ `i` ä¸ªèŠ‚ç‚¹çš„çˆ¶äº²èŠ‚ç‚¹çš„ç¼–å·ã€‚ç”±äºèŠ‚ç‚¹ 0 æ˜¯æ ¹ï¼Œ`parent[0] == -1`ã€‚

ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„å­—ç¬¦ä¸² `s` ï¼Œå…¶ä¸­ `s[i]` æ˜¯èŠ‚ç‚¹ `i` å¯¹åº”çš„å­—ç¬¦ã€‚

å¯¹äºèŠ‚ç‚¹ç¼–å·ä» `1` åˆ° `n - 1` çš„æ¯ä¸ªèŠ‚ç‚¹ `x` ï¼Œæˆ‘ä»¬ åŒæ—¶ æ‰§è¡Œä»¥ä¸‹æ“ä½œ ä¸€æ¬¡ ï¼š

- æ‰¾åˆ°è·ç¦»èŠ‚ç‚¹ `x` æœ€è¿‘ çš„ç¥–å…ˆèŠ‚ç‚¹ `y` ï¼Œä¸” `s[x] == s[y]`ã€‚
- å¦‚æœèŠ‚ç‚¹ `y` ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆä¸åšä»»ä½•ä¿®æ”¹ã€‚
- å¦åˆ™ï¼Œå°†èŠ‚ç‚¹ `x` ä¸å®ƒçˆ¶äº²èŠ‚ç‚¹ä¹‹é—´çš„è¾¹ åˆ é™¤ ï¼Œåœ¨ `x` ä¸ `y` ä¹‹é—´è¿æ¥ä¸€æ¡è¾¹ï¼Œä½¿ `y` å˜ä¸º `x` æ–°çš„çˆ¶èŠ‚ç‚¹ã€‚

è¯·ä½ è¿”å›ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„æ•°ç»„ `answer` ï¼Œå…¶ä¸­ `answer[i]` æ˜¯ æœ€ç»ˆ æ ‘ä¸­ï¼ŒèŠ‚ç‚¹ `i` ä¸ºæ ¹çš„ å­æ ‘ çš„ å¤§å°ã€‚

> - å­æ ‘
> - treeName æ ‘ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹åŠå…¶æ‰€æœ‰å­å­™èŠ‚ç‚¹æ‰€æ„æˆçš„æ ‘ç§°ä¸º treeName çš„ å­æ ‘ã€‚

---

ç¤ºä¾‹ 1ï¼š

è¾“å…¥ï¼šparent = [-1,0,0,1,1,1], s = "abaabc"

è¾“å‡ºï¼š[6,3,1,1,1,1]

è§£é‡Šï¼š

![img](https://cdn.jsdelivr.net/gh/tnotesjs/imgs@main/2025-09-29-21-14-48.png)

èŠ‚ç‚¹ 3 çš„çˆ¶èŠ‚ç‚¹ä»èŠ‚ç‚¹ 1 å˜ä¸ºèŠ‚ç‚¹ 0ã€‚

---

ç¤ºä¾‹ 2ï¼š

è¾“å…¥ï¼šparent = [-1,0,4,0,1], s = "abbba"

è¾“å‡ºï¼š[5,2,1,1,1]

è§£é‡Šï¼š

![img](https://cdn.jsdelivr.net/gh/tnotesjs/imgs@main/2025-09-29-21-14-52.png)

ä»¥ä¸‹å˜åŒ–ä¼šåŒæ—¶å‘ç”Ÿï¼š

- èŠ‚ç‚¹ 4 çš„çˆ¶èŠ‚ç‚¹ä»èŠ‚ç‚¹ 1 å˜ä¸ºèŠ‚ç‚¹ 0ã€‚
- èŠ‚ç‚¹ 2 çš„çˆ¶èŠ‚ç‚¹ä»èŠ‚ç‚¹ 4 å˜ä¸ºèŠ‚ç‚¹ 1ã€‚

---

æç¤ºï¼š

- `n == parent.length == s.length`
- `1 <= n <= 10^5`
- å¯¹äºæ‰€æœ‰çš„ `i >= 1` ï¼Œéƒ½æœ‰ `0 <= parent[i] <= n - 1`ã€‚
- `parent[0] == -1`
- `parent` è¡¨ç¤ºä¸€æ£µåˆæ³•çš„æ ‘ã€‚
- `s` åªåŒ…å«å°å†™è‹±æ–‡å­—æ¯ã€‚

## 2. ğŸ¯ s.1 - è§£æ³• 1

::: code-group

<<< ./solutions/1/1.js [js]

:::

- æ—¶é—´å¤æ‚åº¦ï¼š$O(1)$
- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$
