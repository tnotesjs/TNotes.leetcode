# [0028. æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡ã€ç®€å•ã€‘](https://github.com/tnotesjs/TNotes.leetcode/tree/main/notes/0028.%20%E6%89%BE%E5%87%BA%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8C%B9%E9%85%8D%E9%A1%B9%E7%9A%84%E4%B8%8B%E6%A0%87%E3%80%90%E7%AE%80%E5%8D%95%E3%80%91)

<!-- region:toc -->

- [1. ğŸ“ é¢˜ç›®æè¿°](#1--é¢˜ç›®æè¿°)
- [2. ğŸ«§ è¯„ä»·](#2--è¯„ä»·)
- [3. ğŸ¯ s.1 - è°ƒç”¨åŸç”Ÿ API - indexOf](#3--s1---è°ƒç”¨åŸç”Ÿ-api---indexof)
- [4. ğŸ¯ s.2 - æš´åŠ›è§£æ³•](#4--s2---æš´åŠ›è§£æ³•)
- [5. ğŸ¯ s.3 - KMP ç®—æ³•](#5--s3---kmp-ç®—æ³•)
- [6. ğŸ”— å¼•ç”¨](#6--å¼•ç”¨)

<!-- endregion:toc -->

## 1. ğŸ“ é¢˜ç›®æè¿°

- [leetcode](https://leetcode.cn/problems/find-the-index-of-the-first-occurrence-in-a-string/)

ç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸² `haystack` å’Œ `needle` ï¼Œè¯·ä½ åœ¨ `haystack` å­—ç¬¦ä¸²ä¸­æ‰¾å‡º `needle` å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ã€‚å¦‚æœ `needle` ä¸æ˜¯ `haystack` çš„ä¸€éƒ¨åˆ†ï¼Œåˆ™è¿”å› `-1`ã€‚

ç¤ºä¾‹ 1ï¼š

```txt
è¾“å…¥ï¼šhaystack = "sadbutsad", needle = "sad"
è¾“å‡ºï¼š0
è§£é‡Šï¼š"sad" åœ¨ä¸‹æ ‡ 0 å’Œ 6 å¤„åŒ¹é…ã€‚
ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡æ˜¯ 0 ï¼Œæ‰€ä»¥è¿”å› 0 ã€‚
```

ç¤ºä¾‹ 2ï¼š

```txt
è¾“å…¥ï¼šhaystack = "leetcode", needle = "leeto"
è¾“å‡ºï¼š-1
è§£é‡Šï¼š"leeto" æ²¡æœ‰åœ¨ "leetcode" ä¸­å‡ºç°ï¼Œæ‰€ä»¥è¿”å› -1 ã€‚
```

æç¤ºï¼š

- `1 <= haystack.length, needle.length <= 10^4`
- `haystack` å’Œ `needle` ä»…ç”±å°å†™è‹±æ–‡å­—ç¬¦ç»„æˆ

## 2. ğŸ«§ è¯„ä»·

æœ¬èŠ‚ä»‹ç»çš„ KMP ç®—æ³•ï¼Œä»£ç é‡ä¸å¤šï¼Œä½†ç†è§£èµ·æ¥æ¯”è¾ƒè´¹åŠ²å„¿ï¼Œç®—æ˜¯ç»å¸¸å‡ºç°çš„è€ƒç ”é¢˜ã€ç«èµ›é¢˜çš„çº§åˆ«ã€‚åœ¨ TNotes.algorithms ä¸­æœ‰ä»‹ç»å…³äº KMP ç®—æ³•çš„ç›¸å…³ç¬”è®°ã€‚

## 3. ğŸ¯ s.1 - è°ƒç”¨åŸç”Ÿ API - indexOf

::: code-group

<<< ./solutions/1/1.js

:::

- æ—¶é—´å¤æ‚åº¦ï¼š$O(n \times m)$ï¼Œå…¶ä¸­ n æ˜¯ haystack çš„é•¿åº¦ï¼Œm æ˜¯ needle çš„é•¿åº¦ï¼ŒindexOf å†…éƒ¨å®ç°é€šå¸¸ä½¿ç”¨ç±»ä¼¼æš´åŠ›åŒ¹é…çš„æ–¹å¼
- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ï¼Œåªä½¿ç”¨äº†å¸¸æ•°çº§åˆ«çš„é¢å¤–ç©ºé—´

ç›´æ¥è°ƒç”¨ JavaScript å­—ç¬¦ä¸²çš„ `indexOf` æ–¹æ³•æŸ¥æ‰¾å­ä¸²ä½ç½®ã€‚ä½œä¸ºç®—æ³•é¢˜ï¼Œåº”è¯¥æ€è€ƒå¦‚ä½•å®ç°å†…ç½®æ–¹æ³•çš„é€»è¾‘ã€‚

## 4. ğŸ¯ s.2 - æš´åŠ›è§£æ³•

::: code-group

<<< ./solutions/2/1.js

:::

- æ—¶é—´å¤æ‚åº¦ï¼š$O(n \times m)$ï¼Œå…¶ä¸­ n æ˜¯ haystack çš„é•¿åº¦ï¼Œm æ˜¯ needle çš„é•¿åº¦
- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ï¼Œåªä½¿ç”¨äº†å¸¸æ•°çº§åˆ«çš„é¢å¤–ç©ºé—´

åŒå±‚å¾ªç¯æš´åŠ›åŒ¹é…ã€‚å¤–å±‚éå†ä¸»ä¸²ï¼Œå†…å±‚é€å­—ç¬¦æ¯”è¾ƒå­ä¸²ï¼Œä¸€æ—¦ä¸åŒ¹é…å°±ä»ä¸»ä¸²çš„ä¸‹ä¸€ä½é‡æ–°å¼€å§‹åŒ¹é…ã€‚

## 5. ğŸ¯ s.3 - KMP ç®—æ³•

::: code-group

<<< ./solutions/3/1.js

:::

- æ—¶é—´å¤æ‚åº¦ï¼š$O(n + m)$ï¼Œå…¶ä¸­ n æ˜¯ haystack çš„é•¿åº¦ï¼Œm æ˜¯ needle çš„é•¿åº¦ï¼Œæ„å»º next æ•°ç»„éœ€è¦ $O(m)$ï¼ŒåŒ¹é…è¿‡ç¨‹éœ€è¦ $O(n)$
- ç©ºé—´å¤æ‚åº¦ï¼š$O(m)$ï¼Œéœ€è¦é¢å¤–çš„ next æ•°ç»„å­˜å‚¨æ¨¡å¼ä¸²çš„å‰ç¼€ä¿¡æ¯

KMP ç®—æ³•é€šè¿‡é¢„å¤„ç†æ¨¡å¼ä¸²æ„å»º next æ•°ç»„è®°å½•æœ€å¤§ç›¸åŒå‰åç¼€é•¿åº¦ï¼ŒåŒ¹é…å¤±è´¥æ—¶æ ¹æ® next æ•°ç»„æ™ºèƒ½ç§»åŠ¨æ¨¡å¼ä¸²æŒ‡é’ˆï¼Œé¿å…é‡å¤æ¯”è¾ƒï¼Œå°†æ—¶é—´å¤æ‚åº¦ä¼˜åŒ–åˆ°çº¿æ€§ã€‚

## 6. ğŸ”— å¼•ç”¨

- [TNotes.algorithms - 0014. KMP ç®—æ³•][3]
- [å‚è€ƒ solutions - ã€å®«æ°´ä¸‰å¶ã€‘ç®€å•é¢˜å­¦ KMP ç®—æ³•][1]
- [leetcode å®˜æ–¹é¢˜è§£][2]

[1]: https://leetcode.cn/problems/find-the-index-of-the-first-occurrence-in-a-string/solutions/575568/shua-chuan-lc-shuang-bai-po-su-jie-fa-km-tb86/
[2]: https://leetcode.cn/problems/find-the-index-of-the-first-occurrence-in-a-string/solutions/732236/shi-xian-strstr-by-leetcode-solution-ds6y/
[3]: https://tnotesjs.github.io/TNotes.algorithms/notes/0014.%20KMP%20%E7%AE%97%E6%B3%95/README
