# [3521. æŸ¥æ‰¾æ¨èäº§å“å¯¹ã€ä¸­ç­‰ã€‘](https://github.com/tnotesjs/TNotes.leetcode/tree/main/notes/3521.%20%E6%9F%A5%E6%89%BE%E6%8E%A8%E8%8D%90%E4%BA%A7%E5%93%81%E5%AF%B9%E3%80%90%E4%B8%AD%E7%AD%89%E3%80%91)

<!-- region:toc -->

- [1. ğŸ“ é¢˜ç›®æè¿°](#1--é¢˜ç›®æè¿°)
- [2. ğŸ¯ s.1 - è§£æ³• 1](#2--s1---è§£æ³•-1)
- [3. ğŸ¯ s.2 - è§£æ³• 2](#3--s2---è§£æ³•-2)
- [4. ğŸ¯ s.3 - è§£æ³• 3](#4--s3---è§£æ³•-3)

<!-- endregion:toc -->

## 1. ğŸ“ é¢˜ç›®æè¿°

- [leetcode](https://leetcode.cn/problems/find-product-recommendation-pairs/)

è¡¨ï¼š`ProductPurchases`

```txt
+-------------+------+
| Column Name | Type |
+-------------+------+
| user_id     | int  |
| product_id  | int  |
| quantity    | int  |
+-------------+------+
(user_id, product_id) æ˜¯è¿™å¼ è¡¨çš„å”¯ä¸€ä¸»é”®ã€‚
æ¯ä¸€è¡Œä»£è¡¨ç”¨æˆ·ä»¥ç‰¹å®šæ•°é‡è´­ä¹°çš„äº§å“ã€‚
```

è¡¨ï¼š`ProductInfo`

```txt
+-------------+---------+
| Column Name | Type    |
+-------------+---------+
| product_id  | int     |
| category    | varchar |
| price       | decimal |
+-------------+---------+
product_id æ˜¯è¿™å¼ è¡¨çš„å”¯ä¸€ä¸»é”®ã€‚
æ¯ä¸€è¡Œè¡¨ç¤ºä¸€ä¸ªäº§å“çš„ç±»åˆ«å’Œä»·æ ¼ã€‚
```

äºšé©¬é€Šå¸Œæœ›æ ¹æ® å…±åŒè´­ä¹°æ¨¡å¼ å®ç° â€œè´­ä¹°æ­¤å•†å“çš„ç”¨æˆ·è¿˜è´­ä¹°äº†...â€ åŠŸèƒ½ã€‚ç¼–å†™ä¸€ä¸ªè§£å†³æ–¹æ¡ˆä»¥å®ç°ï¼š

1. è¯†åˆ« è¢«åŒä¸€å®¢æˆ·ä¸€èµ·é¢‘ç¹è´­ä¹°çš„ ä¸åŒ äº§å“å¯¹ï¼ˆå…¶ä¸­ `product1_id` < `product2_id`ï¼‰
2. å¯¹äº æ¯ä¸ªäº§å“å¯¹ï¼Œç¡®å®šæœ‰å¤šå°‘å®¢æˆ·è´­ä¹°äº†è¿™ä¸¤ç§äº§å“

å¦‚æœ è‡³å°‘æœ‰ `3` ä½ä¸åŒçš„ å®¢æˆ·åŒæ—¶è´­ä¹°äº†è¿™ä¸¤ç§äº§å“ï¼Œåˆ™è®¤ä¸ºè¯¥ äº§å“å¯¹ é€‚åˆæ¨èã€‚

è¿”å›ç»“æœè¡¨ä»¥ customer_count é™åº æ’åºï¼Œå¹¶ä¸”ä¸ºäº†é¿å…æ’åºæŒå¹³ï¼Œä»¥ `product1_id` å‡åº æ’åºï¼Œå¹¶ä»¥ `product2_id` å‡åº æ’åºã€‚

ç»“æœæ ¼å¼å¦‚ä¸‹æ‰€ç¤ºã€‚

ç¤ºä¾‹ï¼š

è¾“å…¥ï¼š

ProductPurchases è¡¨ï¼š

```txt
+---------+------------+----------+
| user_id | product_id | quantity |
+---------+------------+----------+
| 1       | 101        | 2        |
| 1       | 102        | 1        |
| 1       | 103        | 3        |
| 2       | 101        | 1        |
| 2       | 102        | 5        |
| 2       | 104        | 1        |
| 3       | 101        | 2        |
| 3       | 103        | 1        |
| 3       | 105        | 4        |
| 4       | 101        | 1        |
| 4       | 102        | 1        |
| 4       | 103        | 2        |
| 4       | 104        | 3        |
| 5       | 102        | 2        |
| 5       | 104        | 1        |
+---------+------------+----------+
```

ProductInfo è¡¨ï¼š

```txt
+------------+-------------+-------+
| product_id | category    | price |
+------------+-------------+-------+
| 101        | Electronics | 100   |
| 102        | Books       | 20    |
| 103        | Clothing    | 35    |
| 104        | Kitchen     | 50    |
| 105        | Sports      | 75    |
+------------+-------------+-------+
```

è¾“å‡ºï¼š

```txt
+-------------+-------------+-------------------+-------------------+----------------+
| product1_id | product2_id | product1_category | product2_category | customer_count |
+-------------+-------------+-------------------+-------------------+----------------+
| 101         | 102         | Electronics       | Books             | 3              |
| 101         | 103         | Electronics       | Clothing          | 3              |
| 102         | 104         | Books             | Kitchen           | 3              |
+-------------+-------------+-------------------+-------------------+----------------+
```

è§£é‡Šï¼š

- äº§å“å¯¹ (101, 102)ï¼š
  - è¢«ç”¨æˆ· 1ï¼Œ2 å’Œ 4 è´­ä¹°ï¼ˆ3 ä¸ªæ¶ˆè´¹è€…ï¼‰
  - äº§å“ 101 å±äºç”µå­å•†å“ç±»åˆ«
  - äº§å“ 102 å±äºå›¾ä¹¦ç±»åˆ«
- äº§å“å¯¹ (101, 103)ï¼š
  - è¢«ç”¨æˆ· 1ï¼Œ3 å’Œ 4 è´­ä¹°ï¼ˆ3 ä¸ªæ¶ˆè´¹è€…ï¼‰
  - äº§å“ 101 å±äºç”µå­å•†å“ç±»åˆ«
  - äº§å“ 103 å±äºæœè£…ç±»åˆ«
- äº§å“å¯¹ (102, 104)ï¼š
  - è¢«ç”¨æˆ· 2ï¼Œ4 å’Œ 5 è´­ä¹°ï¼ˆ3 ä¸ªæ¶ˆè´¹è€…ï¼‰
  - äº§å“ 102 å±äºå›¾ä¹¦ç±»åˆ«
  - äº§å“ 104 å±äºå¨æˆ¿ç”¨å“ç±»åˆ«

ç»“æœä»¥ customer_count é™åºæ’åºã€‚å¯¹äºæœ‰ç›¸åŒ customer_count çš„äº§å“å¯¹ï¼Œå°†å®ƒä»¬ä»¥ product1_id å‡åºæ’åºï¼Œç„¶åä»¥ product2_id å‡åºæ’åºã€‚

## 2. ğŸ¯ s.1 - è§£æ³• 1

::: code-group

<<< ./solutions/1/1.js [js]

:::

- æ—¶é—´å¤æ‚åº¦ï¼š$O(1)$
- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$

## 3. ğŸ¯ s.2 - è§£æ³• 2

::: code-group

<<< ./solutions/2/1.js [js]

:::

- æ—¶é—´å¤æ‚åº¦ï¼š$O(1)$
- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$

## 4. ğŸ¯ s.3 - è§£æ³• 3

::: code-group

<<< ./solutions/3/1.js [js]

:::

- æ—¶é—´å¤æ‚åº¦ï¼š$O(1)$
- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$
