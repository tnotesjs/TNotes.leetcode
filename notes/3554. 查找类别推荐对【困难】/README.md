# [3554. æŸ¥æ‰¾ç±»åˆ«æ¨èå¯¹ã€å›°éš¾ã€‘](https://github.com/tnotesjs/TNotes.leetcode/tree/main/notes/3554.%20%E6%9F%A5%E6%89%BE%E7%B1%BB%E5%88%AB%E6%8E%A8%E8%8D%90%E5%AF%B9%E3%80%90%E5%9B%B0%E9%9A%BE%E3%80%91)

<!-- region:toc -->

- [1. ğŸ“ é¢˜ç›®æè¿°](#1--é¢˜ç›®æè¿°)
- [2. ğŸ¯ s.1 - è§£æ³• 1](#2--s1---è§£æ³•-1)
- [3. ğŸ¯ s.2 - è§£æ³• 2](#3--s2---è§£æ³•-2)
- [4. ğŸ¯ s.3 - è§£æ³• 3](#4--s3---è§£æ³•-3)

<!-- endregion:toc -->

## 1. ğŸ“ é¢˜ç›®æè¿°

- [leetcode](https://leetcode.cn/problems/find-category-recommendation-pairs/)

è¡¨ï¼š`ProductPurchases`

```txt
+-------------+------+
| Column Name | Type |
+-------------+------+
| user_id     | int  |
| product_id  | int  |
| quantity    | int  |
+-------------+------+
(user_id, product_id) æ˜¯è¿™å¼ è¡¨çš„å”¯ä¸€ä¸»é”®ã€‚
æ¯ä¸€è¡Œä»£è¡¨ç”¨æˆ·ä»¥ç‰¹å®šæ•°é‡è´­ä¹°çš„ä¸€ç§äº§å“ã€‚
```

è¡¨ï¼š`ProductInfo`

```txt
+-------------+---------+
| Column Name | Type    |
+-------------+---------+
| product_id  | int     |
| category    | varchar |
| price       | decimal |
+-------------+---------+
product_id æ˜¯è¿™å¼ è¡¨çš„å”¯ä¸€ä¸»é”®ã€‚
æ¯ä¸€è¡Œè¡¨ç¤ºä¸€ä»¶å•†å“çš„ç±»åˆ«å’Œä»·æ ¼ã€‚
```

äºšé©¬é€Šæƒ³è¦äº†è§£ä¸åŒäº§å“ç±»åˆ«çš„è´­ç‰©æ¨¡å¼ã€‚ç¼–å†™ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼š

1. æŸ¥æ‰¾æ‰€æœ‰ ç±»åˆ«å¯¹ï¼ˆå…¶ä¸­ `category1` < `category2`ï¼‰
2. å¯¹äº æ¯ä¸ªç±»åˆ«å¯¹ï¼Œç¡®å®š åŒæ—¶ è´­ä¹°äº†ä¸¤ç±»åˆ«äº§å“çš„ ä¸åŒç”¨æˆ· æ•°é‡

å¦‚æœè‡³å°‘æœ‰ `3` ä¸ªä¸åŒçš„å®¢æˆ·è´­ä¹°äº†ä¸¤ä¸ªç±»åˆ«çš„äº§å“ï¼Œåˆ™ç±»åˆ«å¯¹è¢«è§†ä¸º å¯æŠ¥å‘Šçš„ã€‚

è¿”å›å¯æŠ¥å‘Šç±»åˆ«å¯¹çš„ç»“æœè¡¨ä»¥ customer_count é™åº æ’åºï¼Œå¹¶ä¸”ä¸ºäº†é˜²æ­¢æ’åºæŒå¹³ï¼Œä»¥ category1 å­—å…¸åº å‡åº æ’åºï¼Œç„¶åä»¥ category2 å‡åº æ’åºã€‚

ç»“æœæ ¼å¼å¦‚ä¸‹æ‰€ç¤ºã€‚

ç¤ºä¾‹ï¼š

è¾“å…¥ï¼š

ProductPurchases è¡¨ï¼š

```txt
+---------+------------+----------+
| user_id | product_id | quantity |
+---------+------------+----------+
| 1       | 101        | 2        |
| 1       | 102        | 1        |
| 1       | 201        | 3        |
| 1       | 301        | 1        |
| 2       | 101        | 1        |
| 2       | 102        | 2        |
| 2       | 103        | 1        |
| 2       | 201        | 5        |
| 3       | 101        | 2        |
| 3       | 103        | 1        |
| 3       | 301        | 4        |
| 3       | 401        | 2        |
| 4       | 101        | 1        |
| 4       | 201        | 3        |
| 4       | 301        | 1        |
| 4       | 401        | 2        |
| 5       | 102        | 2        |
| 5       | 103        | 1        |
| 5       | 201        | 2        |
| 5       | 202        | 3        |
+---------+------------+----------+
```

ProductInfo è¡¨ï¼š

```txt
+------------+-------------+-------+
| product_id | category    | price |
+------------+-------------+-------+
| 101        | Electronics | 100   |
| 102        | Books       | 20    |
| 103        | Books       | 35    |
| 201        | Clothing    | 45    |
| 202        | Clothing    | 60    |
| 301        | Sports      | 75    |
| 401        | Kitchen     | 50    |
+------------+-------------+-------+
```

è¾“å‡ºï¼š

```txt
+-------------+-------------+----------------+
| category1   | category2   | customer_count |
+-------------+-------------+----------------+
| Books       | Clothing    | 3              |
| Books       | Electronics | 3              |
| Clothing    | Electronics | 3              |
| Electronics | Sports      | 3              |
+-------------+-------------+----------------+
```

è§£é‡Šï¼š

- Books-Clothing:
  - ç”¨æˆ· 1 è´­ä¹°æ¥è‡ª Books (102) å’Œ Clothing (201) çš„å•†å“
  - ç”¨æˆ· 2 è´­ä¹°æ¥è‡ª Books (102, 103) å’Œ Clothing (201) çš„å•†å“
  - ç”¨æˆ· 5 è´­ä¹°æ¥è‡ª Books (102, 103) å’Œ Clothing (201, 202) çš„å•†å“
  - å…±è®¡ï¼š3 ä¸ªç”¨æˆ·è´­ä¹°åŒä¸€ç±»åˆ«çš„å•†å“
- Books-Electronics:
  - ç”¨æˆ· 1 è´­ä¹°æ¥è‡ª Books (102) å’Œ Electronics (101) çš„å•†å“
  - ç”¨æˆ· 2 è´­ä¹°æ¥è‡ª Books (102, 103) å’Œ Electronics (101) çš„å•†å“
  - ç”¨æˆ· 3 è´­ä¹°æ¥è‡ª Books (103) å’Œ Electronics (101) çš„å•†å“
  - å…±è®¡ï¼š3 ä¸ªæ¶ˆè´¹è€…è´­ä¹°åŒä¸€ç±»åˆ«çš„å•†å“
- Clothing-Electronics:
  - ç”¨æˆ· 1 è´­ä¹°æ¥è‡ª Clothing (201) å’Œ Electronics (101) çš„å•†å“
  - ç”¨æˆ· 2 è´­ä¹°æ¥è‡ª Clothing (201) å’Œ Electronics (101) çš„å•†å“
  - ç”¨æˆ· 4 è´­ä¹°æ¥è‡ª Clothing (201) å’Œ Electronics (101) çš„å•†å“
  - å…±è®¡ï¼š3 ä¸ªæ¶ˆè´¹è€…è´­ä¹°åŒä¸€ç±»åˆ«çš„å•†å“
- Electronics-Sports:
  - ç”¨æˆ· 1 è´­ä¹°æ¥è‡ª Electronics (101) å’Œ Sports (301) çš„å•†å“
  - ç”¨æˆ· 3 è´­ä¹°æ¥è‡ª Electronics (101) å’Œ Sports (301) çš„å•†å“
  - ç”¨æˆ· 4 è´­ä¹°æ¥è‡ª Electronics (101) å’Œ Sports (301) çš„å•†å“
  - å…±è®¡ï¼š3 ä¸ªæ¶ˆè´¹è€…è´­ä¹°åŒä¸€ç±»åˆ«çš„å•†å“
- å…¶å®ƒç±»åˆ«å¯¹æ¯”å¦‚ Clothing-Sportsï¼ˆåªæœ‰ 2 ä¸ªæ¶ˆè´¹è€…ï¼šç”¨æˆ· 1 å’Œ 4ï¼‰å’Œ Books-Kitchenï¼ˆåªæœ‰ 1 ä¸ªæ¶ˆè´¹è€…ï¼šç”¨æˆ· 3ï¼‰å…±åŒçš„æ¶ˆè´¹è€…å°‘äº 3 ä¸ªï¼Œå› æ­¤ä¸åŒ…å«åœ¨ç»“æœå†…ã€‚

ç»“æœæŒ‰ customer_count é™åºæ’åˆ—ã€‚ç”±äºæ‰€æœ‰å¯¹éƒ½æœ‰ç›¸åŒçš„å®¢æˆ·æ•°é‡ 3ï¼Œå®ƒä»¬æŒ‰ category1ï¼ˆç„¶åæ˜¯ category2ï¼‰å‡åºæ’åˆ—ã€‚

## 2. ğŸ¯ s.1 - è§£æ³• 1

::: code-group

<<< ./solutions/1/1.js [js]

:::

- æ—¶é—´å¤æ‚åº¦ï¼š$O(1)$
- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$

## 3. ğŸ¯ s.2 - è§£æ³• 2

::: code-group

<<< ./solutions/2/1.js [js]

:::

- æ—¶é—´å¤æ‚åº¦ï¼š$O(1)$
- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$

## 4. ğŸ¯ s.3 - è§£æ³• 3

::: code-group

<<< ./solutions/3/1.js [js]

:::

- æ—¶é—´å¤æ‚åº¦ï¼š$O(1)$
- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$
