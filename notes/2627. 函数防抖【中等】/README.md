# [2627. å‡½æ•°é˜²æŠ–ã€ä¸­ç­‰ã€‘](https://github.com/Tdahuyou/TNotes.leetcode/tree/main/notes/2627.%20%E5%87%BD%E6%95%B0%E9%98%B2%E6%8A%96%E3%80%90%E4%B8%AD%E7%AD%89%E3%80%91)

<!-- region:toc -->

- [1. ğŸ”— links](#1--links)
- [2. ğŸ“ Description](#2--description)
- [3. ğŸ¯ Solutions.1](#3--solutions1)

<!-- endregion:toc -->

- [leetcode](https://leetcode.cn/problems/debounce/)

## 1. ğŸ”— links

- https://lodash.com/docs/4.17.15#debounce - Lodashï¼Œ`_.debounce(func, [wait=0], [options={}])`
- https://github.com/lodash/lodash/blob/4.17.15/lodash.js#L10304 - github Lodashï¼Œdebounce å®ç°æºç 
- https://github.com/Tdahuyou/javascript - 0037. é˜²æŠ–ã€èŠ‚æµ

## 2. ğŸ“ Description

è¯·ä½ ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶å‚æ•°ä¸ºå¦ä¸€ä¸ªå‡½æ•°å’Œä¸€ä¸ªä»¥æ¯«ç§’ä¸ºå•ä½çš„æ—¶é—´ `t` ï¼Œå¹¶è¿”å›è¯¥å‡½æ•°çš„ Â **å‡½æ•°é˜²æŠ–**Â  åçš„ç»“æœã€‚

**å‡½æ•°é˜²æŠ–** æ–¹æ³•æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„æ‰§è¡Œè¢«å»¶è¿Ÿäº† `t` æ¯«ç§’ï¼Œå¦‚æœåœ¨è¿™ä¸ªæ—¶é—´çª—å£å†…å†æ¬¡è°ƒç”¨å®ƒï¼Œå®ƒçš„æ‰§è¡Œå°†è¢«å–æ¶ˆã€‚ä½ ç¼–å†™çš„é˜²æŠ–å‡½æ•°ä¹Ÿåº”è¯¥æ¥æ”¶ä¼ é€’çš„å‚æ•°ã€‚

ä¾‹å¦‚ï¼Œå‡è®¾ `t = 50ms` ï¼Œå‡½æ•°åˆ†åˆ«åœ¨ `30ms` ã€ `60ms` å’Œ `100ms` æ—¶è°ƒç”¨ã€‚å‰ä¸¤ä¸ªå‡½æ•°è°ƒç”¨å°†è¢«å–æ¶ˆï¼Œç¬¬ä¸‰ä¸ªå‡½æ•°è°ƒç”¨å°†åœ¨ `150ms` æ‰§è¡Œã€‚å¦‚æœæ”¹ä¸º `t = 35ms` ï¼Œåˆ™ç¬¬ä¸€ä¸ªè°ƒç”¨å°†è¢«å–æ¶ˆï¼Œç¬¬äºŒä¸ªè°ƒç”¨å°†åœ¨ `95ms` æ‰§è¡Œï¼Œç¬¬ä¸‰ä¸ªè°ƒç”¨å°†åœ¨ `135ms` æ‰§è¡Œã€‚

![](https://cdn.jsdelivr.net/gh/tnotesjs/imgs@main/2024-09-26-21-44-40.png)

ä¸Šå›¾å±•ç¤ºäº†äº†é˜²æŠ–å‡½æ•°æ˜¯å¦‚ä½•è½¬æ¢äº‹ä»¶çš„ã€‚å…¶ä¸­ï¼Œæ¯ä¸ªçŸ©å½¢è¡¨ç¤º 100msï¼Œåå¼¹æ—¶é—´ä¸º 400msã€‚æ¯ç§é¢œè‰²ä»£è¡¨ä¸€ç»„ä¸åŒçš„è¾“å…¥ã€‚

è¯·åœ¨ä¸ä½¿ç”¨ lodash çš„ `_.debounce()` å‡½æ•°çš„å‰æä¸‹è§£å†³è¯¥é—®é¢˜ã€‚

**ç¤ºä¾‹ 1ï¼š**

è¾“å…¥ï¼š

```js
t = 50
calls = [
  { t: 50, inputs: [1] },
  { t: 75, inputs: [2] },
]
```

è¾“å‡ºï¼š`[{"t": 125, inputs: [2]}]`

è§£é‡Šï¼š

```js
let start = Date.now()
function log(...inputs) {
  console.log([Date.now() - start, inputs])
}
const dlog = debounce(log, 50)
setTimeout(() => dlog(1), 50)
setTimeout(() => dlog(2), 75)
```

- ç¬¬ä¸€æ¬¡è°ƒç”¨è¢«ç¬¬äºŒæ¬¡è°ƒç”¨å–æ¶ˆï¼Œå› ä¸ºç¬¬äºŒæ¬¡è°ƒç”¨å‘ç”Ÿåœ¨ 100ms ä¹‹å‰ã€‚
- ç¬¬äºŒæ¬¡è°ƒç”¨å»¶è¿Ÿ 50msï¼Œåœ¨ 125ms æ‰§è¡Œã€‚è¾“å…¥ä¸º (2)ã€‚

**ç¤ºä¾‹ 2ï¼š**

è¾“å…¥ï¼š

```js
t = 20
calls = [
  { t: 50, inputs: [1] },
  { t: 100, inputs: [2] },
]
```

è¾“å‡ºï¼š`[{"t": 70, inputs: [1]}, {"t": 120, inputs: [2]}]`

è§£é‡Šï¼š

- ç¬¬ä¸€æ¬¡è°ƒç”¨å»¶è¿Ÿåˆ° 70msã€‚è¾“å…¥ä¸º (1)ã€‚
- ç¬¬äºŒæ¬¡è°ƒç”¨å»¶è¿Ÿåˆ° 120msã€‚è¾“å…¥ä¸º (2)ã€‚

**ç¤ºä¾‹ 3ï¼š**

è¾“å…¥ï¼š

```js
t = 150
calls = [
  { t: 50, inputs: [1, 2] },
  { t: 300, inputs: [3, 4] },
  { t: 300, inputs: [5, 6] },
]
```

è¾“å‡ºï¼š`[{"t": 200, inputs: [1,2]}, {"t": 450, inputs: [5, 6]}]`

è§£é‡Šï¼š

- ç¬¬ä¸€æ¬¡è°ƒç”¨å»¶è¿Ÿäº† 150msï¼Œè¿è¡Œæ—¶é—´ä¸º 200msã€‚è¾“å…¥ä¸º (1, 2)ã€‚
- ç¬¬äºŒæ¬¡è°ƒç”¨è¢«ç¬¬ä¸‰æ¬¡è°ƒç”¨å–æ¶ˆ
- ç¬¬ä¸‰æ¬¡è°ƒç”¨å»¶è¿Ÿäº† 150msï¼Œè¿è¡Œæ—¶é—´ä¸º 450msã€‚è¾“å…¥ä¸º (5, 6)ã€‚

**æç¤ºï¼š**

- `0 <= t <= 1000`
- `1 <= calls.length <= 10`
- `0 <= calls[i].t <= 1000`
- `0 <= calls[i].inputs.length <= 10`

## 3. ğŸ¯ Solutions.1

```javascript
/**
 * @param {Function} fn
 * @param {number} t milliseconds
 * @return {Function}
 */
var debounce = function (fn, t) {
  let timer
  return function (...args) {
    if (timer) clearTimeout(timer)
    timer = setTimeout((_) => fn(...args), t)
  }
}

/**
 * const log = debounce(console.log, 100);
 * log('Hello'); // cancelled
 * log('Hello'); // cancelled
 * log('Hello'); // Logged at t=100ms
 */
```

**é€»è¾‘åˆ†æ**

æ¯æ¬¡ `debounce` è¿”å›çš„å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œéƒ½åšä»¥ä¸‹ä¸¤ä»¶äº‹å„¿ï¼š

1. `clearTimeout(timer)` æ¸…ç©ºä¹‹å‰çš„å»¶è¿Ÿè§¦å‘å™¨ï¼Œæ— è®ºæœ‰æ²¡æœ‰éƒ½æ¸…ç©ºã€‚ï¼ˆè¿™é‡Œçš„ if åˆ¤æ–­é€»è¾‘æ²¡æœ‰å¤šå¤§æ„ä¹‰ï¼Œæœ‰æ²¡æœ‰éƒ½è¡Œï¼‰
2. `timer = setTimeout(_ => fn(...args), t)` ç»‘å®šæ–°çš„è§¦å‘å™¨ï¼Œå»¶è¿Ÿæ—¶é—´ä¸º `t`ã€‚
