# [3508. è®¾è®¡è·¯ç”±å™¨ã€ä¸­ç­‰ã€‘](https://github.com/tnotesjs/TNotes.leetcode/tree/main/notes/3508.%20%E8%AE%BE%E8%AE%A1%E8%B7%AF%E7%94%B1%E5%99%A8%E3%80%90%E4%B8%AD%E7%AD%89%E3%80%91)

<!-- region:toc -->

- [1. ğŸ“ é¢˜ç›®æè¿°](#1--é¢˜ç›®æè¿°)
- [2. ğŸ¯ s.1 - è§£æ³• 1](#2--s1---è§£æ³•-1)

<!-- endregion:toc -->

## 1. ğŸ“ é¢˜ç›®æè¿°

- [leetcode](https://leetcode.cn/problems/implement-router/)

è¯·ä½ è®¾è®¡ä¸€ä¸ªæ•°æ®ç»“æ„æ¥é«˜æ•ˆç®¡ç†ç½‘ç»œè·¯ç”±å™¨ä¸­çš„æ•°æ®åŒ…ã€‚æ¯ä¸ªæ•°æ®åŒ…åŒ…å«ä»¥ä¸‹å±æ€§ï¼š

- `source`ï¼šç”Ÿæˆè¯¥æ•°æ®åŒ…çš„æœºå™¨çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚
- `destination`ï¼šç›®æ ‡æœºå™¨çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚
- `timestamp`ï¼šè¯¥æ•°æ®åŒ…åˆ°è¾¾è·¯ç”±å™¨çš„æ—¶é—´æˆ³ã€‚

å®ç° `Router` ç±»ï¼š

`Router(int memoryLimit)`ï¼šåˆå§‹åŒ–è·¯ç”±å™¨å¯¹è±¡ï¼Œå¹¶è®¾ç½®å›ºå®šçš„å†…å­˜é™åˆ¶ã€‚

- `memoryLimit` æ˜¯è·¯ç”±å™¨åœ¨ä»»æ„æ—¶é—´ç‚¹å¯ä»¥å­˜å‚¨çš„ æœ€å¤§ æ•°æ®åŒ…æ•°é‡ã€‚
- å¦‚æœæ·»åŠ ä¸€ä¸ªæ–°æ•°æ®åŒ…ä¼šè¶…è¿‡è¿™ä¸ªé™åˆ¶ï¼Œåˆ™å¿…é¡»ç§»é™¤ æœ€æ—§çš„ æ•°æ®åŒ…ä»¥è…¾å‡ºç©ºé—´ã€‚

`bool addPacket(int source, int destination, int timestamp)`ï¼šå°†å…·æœ‰ç»™å®šå±æ€§çš„æ•°æ®åŒ…æ·»åŠ åˆ°è·¯ç”±å™¨ã€‚

- å¦‚æœè·¯ç”±å™¨ä¸­å·²ç»å­˜åœ¨ä¸€ä¸ªå…·æœ‰ç›¸åŒ `source`ã€`destination` å’Œ `timestamp` çš„æ•°æ®åŒ…ï¼Œåˆ™è§†ä¸ºé‡å¤æ•°æ®åŒ…ã€‚
- å¦‚æœæ•°æ®åŒ…æˆåŠŸæ·»åŠ ï¼ˆå³ä¸æ˜¯é‡å¤æ•°æ®åŒ…ï¼‰ï¼Œè¿”å› `true`ï¼›å¦åˆ™è¿”å› `false`ã€‚

`int[] forwardPacket()`ï¼šä»¥ FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰é¡ºåºè½¬å‘ä¸‹ä¸€ä¸ªæ•°æ®åŒ…ã€‚

- ä»å­˜å‚¨ä¸­ç§»é™¤è¯¥æ•°æ®åŒ…ã€‚
- ä»¥æ•°ç»„ `[source, destination, timestamp]` çš„å½¢å¼è¿”å›è¯¥æ•°æ®åŒ…ã€‚
- å¦‚æœæ²¡æœ‰æ•°æ®åŒ…å¯ä»¥è½¬å‘ï¼Œåˆ™è¿”å›ç©ºæ•°ç»„ã€‚

`int getCount(int destination, int startTime, int endTime)`ï¼š

- è¿”å›å½“å‰å­˜å‚¨åœ¨è·¯ç”±å™¨ä¸­ï¼ˆå³å°šæœªè½¬å‘ï¼‰çš„ï¼Œä¸”ç›®æ ‡åœ°å€ä¸ºæŒ‡å®š `destination` ä¸”æ—¶é—´æˆ³åœ¨èŒƒå›´ `[startTime, endTime]`ï¼ˆåŒ…æ‹¬ä¸¤ç«¯ï¼‰å†…çš„æ•°æ®åŒ…æ•°é‡ã€‚

æ³¨æ„ï¼šå¯¹äº `addPacket` çš„æŸ¥è¯¢ä¼šæŒ‰ç…§ `timestamp` çš„éé€’å‡é¡ºåºè¿›è¡Œã€‚

---

- ç¤ºä¾‹ 1ï¼š

è¾“å…¥ï¼š  
["Router", "addPacket", "addPacket", "addPacket", "addPacket", "addPacket", "forwardPacket", "addPacket", "getCount"]  
[[3], [1, 4, 90], [2, 5, 90], [1, 4, 90], [3, 5, 95], [4, 5, 105], [], [5, 2, 110], [5, 100, 110]]

è¾“å‡ºï¼š  
[null, true, true, false, true, true, [2, 5, 90], true, 1]

è§£é‡Šï¼š

`Router router = new Router(3);` // åˆå§‹åŒ–è·¯ç”±å™¨ï¼Œå†…å­˜é™åˆ¶ä¸º 3ã€‚  
`router.addPacket(1, 4, 90);` // æ•°æ®åŒ…è¢«æ·»åŠ ï¼Œè¿”å› Trueã€‚  
`router.addPacket(2, 5, 90);` // æ•°æ®åŒ…è¢«æ·»åŠ ï¼Œè¿”å› Trueã€‚  
`router.addPacket(1, 4, 90);` // è¿™æ˜¯ä¸€ä¸ªé‡å¤æ•°æ®åŒ…ï¼Œè¿”å› Falseã€‚  
`router.addPacket(3, 5, 95);` // æ•°æ®åŒ…è¢«æ·»åŠ ï¼Œè¿”å› Trueã€‚  
`router.addPacket(4, 5, 105);` // æ•°æ®åŒ…è¢«æ·»åŠ ï¼Œ`[1, 4, 90]` è¢«ç§»é™¤ï¼Œå› ä¸ºæ•°æ®åŒ…æ•°é‡è¶…è¿‡é™åˆ¶ï¼Œè¿”å› Trueã€‚  
`router.forwardPacket();` // è½¬å‘æ•°æ®åŒ… `[2, 5, 90]` å¹¶å°†å…¶ä»è·¯ç”±å™¨ä¸­ç§»é™¤ã€‚  
`router.addPacket(5, 2, 110);` // æ•°æ®åŒ…è¢«æ·»åŠ ï¼Œè¿”å› Trueã€‚  
`router.getCount(5, 100, 110);` // å”¯ä¸€ç›®æ ‡åœ°å€ä¸º 5 ä¸”æ—¶é—´åœ¨ `[100, 110]` èŒƒå›´å†…çš„æ•°æ®åŒ…æ˜¯ `[4, 5, 105]`ï¼Œè¿”å› 1ã€‚

---

- ç¤ºä¾‹ 2ï¼š

è¾“å…¥ï¼š  
["Router", "addPacket", "forwardPacket", "forwardPacket"]  
[[2], [7, 4, 90], [], []]

è¾“å‡ºï¼š  
[null, true, [7, 4, 90], []]

è§£é‡Šï¼š

`Router router = new Router(2);` // åˆå§‹åŒ–è·¯ç”±å™¨ï¼Œå†…å­˜é™åˆ¶ä¸º 2ã€‚  
`router.addPacket(7, 4, 90);` // è¿”å› Trueã€‚  
`router.forwardPacket();` // è¿”å› `[7, 4, 90]`ã€‚  
`router.forwardPacket();` // æ²¡æœ‰æ•°æ®åŒ…å¯ä»¥è½¬å‘ï¼Œè¿”å› `[]`ã€‚

---

æç¤ºï¼š

- `2 <= memoryLimit <= 10^5`
- `1 <= source, destination <= 2 * 10^5`
- `1 <= timestamp <= 10^9`
- `1 <= startTime <= endTime <= 10^9`
- `addPacket`ã€`forwardPacket` å’Œ `getCount` æ–¹æ³•çš„æ€»è°ƒç”¨æ¬¡æ•°æœ€å¤šä¸º `10^5`ã€‚
- å¯¹äº `addPacket` çš„æŸ¥è¯¢ï¼Œ`timestamp` æŒ‰éé€’å‡é¡ºåºç»™å‡ºã€‚

## 2. ğŸ¯ s.1 - è§£æ³• 1

::: code-group

<<< ./solutions/1/1.js [js]

:::

- æ—¶é—´å¤æ‚åº¦ï¼š$O(1)$
- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$
