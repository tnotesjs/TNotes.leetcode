# [3451. 查找无效的 IP 地址【困难】](https://github.com/tnotesjs/TNotes.leetcode/tree/main/notes/3451.%20%E6%9F%A5%E6%89%BE%E6%97%A0%E6%95%88%E7%9A%84%20IP%20%E5%9C%B0%E5%9D%80%E3%80%90%E5%9B%B0%E9%9A%BE%E3%80%91)

<!-- region:toc -->

- [1. 📝 题目描述](#1--题目描述)
- [2. 🎯 s.1 - 解法 1](#2--s1---解法-1)
- [3. 🎯 s.2 - 解法 2](#3--s2---解法-2)
- [4. 🎯 s.3 - 解法 3](#4--s3---解法-3)

<!-- endregion:toc -->

## 1. 📝 题目描述

- [leetcode](https://leetcode.cn/problems/find-invalid-ip-addresses/)

表：`logs`

```txt
+-------------+---------+
| Column Name | Type    |
+-------------+---------+
| log_id      | int     |
| ip          | varchar |
| status_code | int     |
+-------------+---------+
log_id 是这张表的唯一主键。
每一行包含服务器访问日志信息，包括 IP 地址和 HTTP 状态码。
```

编写一个解决方案来查找 **无效的 IP 地址**。一个 IPv4 地址如果满足以下任何条件之一，则无效：

- 任何 8 位字节中包含大于 255 的数字
- 任何 8 位字节中含有 **前导零**（如 `01.02.03.04`）
- **少于或多于** `4` 个 8 位字节

返回结果表分别以 `invalid_count`，`ip` **降序** 排序。

结果格式如下所示。

**示例：**

**输入：**

logs 表：

```txt
+--------+---------------+-------------+
| log_id | ip            | status_code |
+--------+---------------+-------------+
| 1      | 192.168.1.1   | 200         |
| 2      | 256.1.2.3     | 404         |
| 3      | 192.168.001.1 | 200         |
| 4      | 192.168.1.1   | 200         |
| 5      | 192.168.1     | 500         |
| 6      | 256.1.2.3     | 404         |
| 7      | 192.168.001.1 | 200         |
+--------+---------------+-------------+
```

**输出：**

```txt
+---------------+--------------+
| ip            | invalid_count|
+---------------+--------------+
| 256.1.2.3     | 2            |
| 192.168.001.1 | 2            |
| 192.168.1     | 1            |
+---------------+--------------+
```

**解释：**

- 256.1.2.3 是无效的，因为 256 > 255
- 192.168.001.1 是无效的，因为有前导零
- 192.168.1 是非法的，因为只有 3 个 8 位字节

输出表分别以 `invalid_count`，`ip` 降序排序。

## 2. 🎯 s.1 - 解法 1

::: code-group

<<< ./solutions/1/1.js [js]

:::

- 时间复杂度：$O(1)$
- 空间复杂度：$O(1)$

## 3. 🎯 s.2 - 解法 2

::: code-group

<<< ./solutions/2/1.js [js]

:::

- 时间复杂度：$O(1)$
- 空间复杂度：$O(1)$

## 4. 🎯 s.3 - 解法 3

::: code-group

<<< ./solutions/3/1.js [js]

:::

- 时间复杂度：$O(1)$
- 空间复杂度：$O(1)$
