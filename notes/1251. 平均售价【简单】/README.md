# [1251. å¹³å‡å”®ä»·ã€ç®€å•ã€‘](https://github.com/tnotesjs/TNotes.leetcode/tree/main/notes/1251.%20%E5%B9%B3%E5%9D%87%E5%94%AE%E4%BB%B7%E3%80%90%E7%AE%80%E5%8D%95%E3%80%91)

<!-- region:toc -->

- [1. ğŸ“ é¢˜ç›®æè¿°](#1--é¢˜ç›®æè¿°)
- [2. ğŸ¯ s.1 - è§£æ³• 1](#2--s1---è§£æ³•-1)
- [3. ğŸ¯ s.2 - è§£æ³• 2](#3--s2---è§£æ³•-2)
- [4. ğŸ¯ s.3 - è§£æ³• 3](#4--s3---è§£æ³•-3)

<!-- endregion:toc -->

## 1. ğŸ“ é¢˜ç›®æè¿°

- [leetcode](https://leetcode.cn/problems/average-selling-price/)

è¡¨ï¼š`Prices`

```txt
+---------------+---------+
| Column Name   | Type    |
+---------------+---------+
| product_id    | int     |
| start_date    | date    |
| end_date      | date    |
| price         | int     |
+---------------+---------+
(product_idï¼Œstart_dateï¼Œend_date) æ˜¯ prices è¡¨çš„ä¸»é”®ï¼ˆå…·æœ‰å”¯ä¸€å€¼çš„åˆ—çš„ç»„åˆï¼‰ã€‚
prices è¡¨çš„æ¯ä¸€è¡Œè¡¨ç¤ºçš„æ˜¯æŸä¸ªäº§å“åœ¨ä¸€æ®µæ—¶æœŸå†…çš„ä»·æ ¼ã€‚
æ¯ä¸ªäº§å“çš„å¯¹åº”æ—¶é—´æ®µæ˜¯ä¸ä¼šé‡å çš„ï¼Œè¿™ä¹Ÿæ„å‘³ç€åŒä¸€ä¸ªäº§å“çš„ä»·æ ¼æ—¶æ®µä¸ä¼šå‡ºç°äº¤å‰ã€‚
```

è¡¨ï¼š`UnitsSold`

```txt
+---------------+---------+
| Column Name   | Type    |
+---------------+---------+
| product_id    | int     |
| purchase_date | date    |
| units         | int     |
+---------------+---------+
è¯¥è¡¨å¯èƒ½åŒ…å«é‡å¤æ•°æ®ã€‚
è¯¥è¡¨çš„æ¯ä¸€è¡Œè¡¨ç¤ºçš„æ˜¯æ¯ç§äº§å“çš„å‡ºå”®æ—¥æœŸï¼Œå•ä½å’Œäº§å“ idã€‚
```

ç¼–å†™è§£å†³æ–¹æ¡ˆä»¥æŸ¥æ‰¾æ¯ç§äº§å“çš„å¹³å‡å”®ä»·ã€‚`average_price` åº”è¯¥ å››èˆäº”å…¥åˆ°å°æ•°ç‚¹åä¸¤ä½ã€‚å¦‚æœäº§å“æ²¡æœ‰ä»»ä½•å”®å‡ºï¼Œåˆ™å‡è®¾å…¶å¹³å‡å”®ä»·ä¸º 0ã€‚

è¿”å›ç»“æœè¡¨ æ— é¡ºåºè¦æ±‚ã€‚

ç»“æœæ ¼å¼å¦‚ä¸‹ä¾‹æ‰€ç¤ºã€‚

---

- ç¤ºä¾‹ 1ï¼š

```txt
è¾“å…¥ï¼š
Prices table:
+------------+------------+------------+--------+
| product_id | start_date | end_date   | price  |
+------------+------------+------------+--------+
| 1          | 2019-02-17 | 2019-02-28 | 5      |
| 1          | 2019-03-01 | 2019-03-22 | 20     |
| 2          | 2019-02-01 | 2019-02-20 | 15     |
| 2          | 2019-02-21 | 2019-03-31 | 30     |
+------------+------------+------------+--------+
UnitsSold table:
+------------+---------------+-------+
| product_id | purchase_date | units |
+------------+---------------+-------+
| 1          | 2019-02-25    | 100   |
| 1          | 2019-03-01    | 15    |
| 2          | 2019-02-10    | 200   |
| 2          | 2019-03-22    | 30    |
+------------+---------------+-------+
è¾“å‡ºï¼š
+------------+---------------+
| product_id | average_price |
+------------+---------------+
| 1          | 6.96          |
| 2          | 16.96         |
+------------+---------------+
è§£é‡Šï¼š
å¹³å‡å”®ä»· = äº§å“æ€»ä»· / é”€å”®çš„äº§å“æ•°é‡ã€‚
äº§å“ 1 çš„å¹³å‡å”®ä»· = ((100 * 5)+(15 * 20) )/ 115 = 6.96
äº§å“ 2 çš„å¹³å‡å”®ä»· = ((200 * 15)+(30 * 30) )/ 230 = 16.96
```

## 2. ğŸ¯ s.1 - è§£æ³• 1

::: code-group

<<< ./solutions/1/1.js [js]

:::

- æ—¶é—´å¤æ‚åº¦ï¼š$O(1)$
- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$
