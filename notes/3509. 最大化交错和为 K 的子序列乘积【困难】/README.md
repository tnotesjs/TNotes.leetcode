# [3509. 最大化交错和为 K 的子序列乘积【困难】](https://github.com/tnotesjs/TNotes.leetcode/tree/main/notes/3509.%20%E6%9C%80%E5%A4%A7%E5%8C%96%E4%BA%A4%E9%94%99%E5%92%8C%E4%B8%BA%20K%20%E7%9A%84%E5%AD%90%E5%BA%8F%E5%88%97%E4%B9%98%E7%A7%AF%E3%80%90%E5%9B%B0%E9%9A%BE%E3%80%91)

<!-- region:toc -->

- [1. 📝 题目描述](#1--题目描述)
- [2. 🎯 s.1 - 解法 1](#2--s1---解法-1)
- [3. 🎯 s.2 - 解法 2](#3--s2---解法-2)
- [4. 🎯 s.3 - 解法 3](#4--s3---解法-3)

<!-- endregion:toc -->

## 1. 📝 题目描述

- [leetcode](https://leetcode.cn/problems/maximum-product-of-subsequences-with-an-alternating-sum-equal-to-k/)

给你一个整数数组 `nums` 和两个整数 `k` 与 `limit`，你的任务是找到一个非空的 **子序列**，满足以下条件：

- 它的 **交错和** 等于 `k`。
- 在乘积 **不超过** `limit` 的前提下，**最大化** 其所有数字的乘积。

返回满足条件的子序列的 **乘积** 。如果不存在这样的子序列，则返回 -1。

**子序列** 是指可以通过删除原数组中的某些（或不删除）元素并保持剩余元素顺序得到的新数组。

**交错和** 是指一个 **从下标 0 开始** 的数组中，**偶数下标** 的元素之和减去 **奇数下标** 的元素之和。

---

- **示例 1：**

**输入：** nums = [1,2,3], k = 2, limit = 10

**输出：** 6

**解释：**

交错和为 2 的子序列有：

- `[1, 2, 3]`
  - 交错和：`1 - 2 + 3 = 2`
  - 乘积：`1 * 2 * 3 = 6`
- `[2]`
  - 交错和：2
  - 乘积：2

在 limit 内的最大乘积是 6。

---

- **示例 2：**

**输入：** nums = [0,2,3], k = -5, limit = 12

**输出：** -1

**解释：**

不存在交错和恰好为 -5 的子序列。

---

- **示例 3：**

**输入：** nums = [2,2,3,3], k = 0, limit = 9

**输出：** 9

**解释：**

交错和为 0 的子序列包括：

- `[2, 2]`
  - 交错和：`2 - 2 = 0`
  - 乘积：`2 * 2 = 4`
- `[3, 3]`
  - 交错和：`3 - 3 = 0`
  - 乘积：`3 * 3 = 9`
- `[2, 2, 3, 3]`
  - 交错和：`2 - 2 + 3 - 3 = 0`
  - 乘积：`2 * 2 * 3 * 3 = 36`

子序列 `[2, 2, 3, 3]` 虽然交错和为 `k` 且乘积最大，但 `36 > 9`，超出 limit 。下一个最大且在 limit 范围内的乘积是 9。

---

**提示：**

- `1 <= nums.length <= 150`
- `0 <= nums[i] <= 12`
- `-10^5 <= k <= 10^5`
- `1 <= limit <= 5000`

## 2. 🎯 s.1 - 解法 1

::: code-group

<<< ./solutions/1/1.js [js]

:::

- 时间复杂度：$O(1)$
- 空间复杂度：$O(1)$

## 3. 🎯 s.2 - 解法 2

::: code-group

<<< ./solutions/2/1.js [js]

:::

- 时间复杂度：$O(1)$
- 空间复杂度：$O(1)$

## 4. 🎯 s.3 - 解法 3

::: code-group

<<< ./solutions/3/1.js [js]

:::

- 时间复杂度：$O(1)$
- 空间复杂度：$O(1)$
